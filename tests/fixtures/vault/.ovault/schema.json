{
  "$schema": "../../../schema.schema.json",
  "version": 1,
  "enums": {
    "status": ["raw", "backlog", "in-flight", "settled"],
    "priority": ["low", "medium", "high"]
  },
  "dynamic_sources": {
    "active_milestones": {
      "dir": "Objectives/Milestones",
      "filter": {
        "status": { "not_in": ["settled"] }
      }
    }
  },
  "types": {
    "objective": {
      "output_dir": "Objectives",
      "subtypes": {
        "task": {
          "output_dir": "Objectives/Tasks",
          "name_field": "Task name",
          "frontmatter": {
            "type": { "value": "objective" },
            "objective-type": { "value": "task" },
            "status": {
              "prompt": "select",
              "enum": "status",
              "default": "raw"
            },
            "milestone": {
              "prompt": "dynamic",
              "source": "active_milestones",
              "format": "quoted-wikilink"
            },
            "creation-date": { "value": "$NOW" },
            "deadline": { "prompt": "input", "label": "Deadline (YYYY-MM-DD)" }
          },
          "frontmatter_order": [
            "type",
            "objective-type",
            "status",
            "milestone",
            "creation-date",
            "deadline"
          ],
          "body_sections": [
            {
              "title": "Steps",
              "level": 2,
              "content_type": "checkboxes",
              "prompt": "multi-input",
              "prompt_label": "Steps (comma-separated)"
            },
            {
              "title": "Notes",
              "level": 2,
              "content_type": "paragraphs"
            }
          ]
        },
        "milestone": {
          "output_dir": "Objectives/Milestones",
          "name_field": "Milestone name",
          "frontmatter": {
            "type": { "value": "objective" },
            "objective-type": { "value": "milestone" },
            "status": {
              "prompt": "select",
              "enum": "status",
              "default": "raw"
            }
          },
          "frontmatter_order": ["type", "objective-type", "status"],
          "body_sections": [
            {
              "title": "Tasks",
              "level": 2,
              "content_type": "none"
            }
          ]
        }
      }
    },
    "idea": {
      "output_dir": "Ideas",
      "name_field": "Idea name",
      "frontmatter": {
        "type": { "value": "idea" },
        "status": { "prompt": "select", "enum": "status", "default": "raw" },
        "priority": { "prompt": "select", "enum": "priority" }
      },
      "frontmatter_order": ["type", "status", "priority"],
      "body_sections": []
    },
    "entity": {
      "output_dir": "Entities",
      "subtypes": {
        "person": {
          "output_dir": "Entities/People",
          "name_field": "Person name",
          "frontmatter": {
            "type": { "value": "entity" },
            "entity-type": { "value": "person" }
          },
          "frontmatter_order": ["type", "entity-type"],
          "body_sections": []
        }
      }
    }
  }
}
