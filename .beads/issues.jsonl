{"id":"ovault-01u","title":"Neovim ecosystem integration","description":"Parent issue for all Neovim-related ovault work.\n\n**Goal:** Make Neovim a full-fledged PKM with ovault, achieving feature parity with the CLI for human-usable operations.\n\n**Components:**\n- Neovim plugin (ovault.nvim)\n- Telescope integration\n- Diagnostics integration\n- Wikilink completion\n- Dashboard/saved queries\n- Eventually: LSP server\n\nSee: plans/features/neovim-plugin.md for implementation plan","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-30T20:15:20.95075-05:00","created_by":"alicemoore","updated_at":"2025-12-30T20:15:20.95075-05:00"}
{"id":"ovault-0qo","title":"Implement ovault open command","description":"Add command to open notes in Obsidian:\n- Parse file argument\n- Resolve vault name\n- Generate Obsidian URI: obsidian://open?vault=NAME\u0026file=PATH\n- Handle cross-platform differences (macOS, Linux, WSL)\n- Add --open flag support to new and edit commands","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:01.063552-05:00","updated_at":"2025-12-26T12:19:54.485095-05:00","closed_at":"2025-12-26T12:19:54.485095-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-0qo","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:56:07.274245-05:00","created_by":"alicemoore"}]}
{"id":"ovault-0wp","title":"LSP server for ovault schema validation","description":"Grow the audit command into a full Language Server Protocol (LSP) implementation.\n\n**Capabilities:**\n- Real-time schema violation diagnostics in editors\n- Frontmatter field validation as you type\n- Enum value completion\n- Dynamic source suggestions (e.g., active milestones)\n- Wikilink completion\n- Dead link warnings\n- Style/format warnings\n\n**Integration points:**\n- Neovim via nvim-lspconfig\n- VSCode via extension\n- Any LSP-compatible editor\n\n**Related features:**\n- Could extend Prettier for auto-formatting frontmatter\n- Shares validation logic with audit command\n- Powers the Neovim plugin diagnostics (ovault-tic)\n\nThis is the long-term vision for turning ovault into a first-class editor experience.\n\nSee: plans/features/neovim-plugin.md for related Neovim work","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-30T20:14:54.97663-05:00","created_by":"alicemoore","updated_at":"2025-12-30T20:14:54.97663-05:00","dependencies":[{"issue_id":"ovault-0wp","depends_on_id":"ovault-6f0","type":"blocks","created_at":"2025-12-30T20:15:02.201946-05:00","created_by":"alicemoore"},{"issue_id":"ovault-0wp","depends_on_id":"ovault-tic","type":"blocks","created_at":"2025-12-30T20:15:02.254403-05:00","created_by":"alicemoore"},{"issue_id":"ovault-0wp","depends_on_id":"ovault-01u","type":"blocks","created_at":"2025-12-30T20:15:27.345414-05:00","created_by":"alicemoore"}]}
{"id":"ovault-0z0","title":"Add --all flag to bulk command for cross-type operations","description":"Add support for `ovault bulk --all` to operate across all managed types.\n\nFeatures:\n- Confirmation prompt: 'This will modify X files across all types. Are you sure? [y/N]'\n- Works with all operations (set, rename, delete, etc.)\n- Useful for vault-wide migrations (e.g., renaming a shared field)\n\nDeferred from initial bulk implementation to reduce scope.\n\nSee plans/features/bulk-operations.md for design.","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-27T21:03:28.782582-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:27.241-05:00","dependencies":[{"issue_id":"ovault-0z0","depends_on_id":"ovault-bj7","type":"blocks","created_at":"2025-12-27T21:03:28.784251-05:00","created_by":"alicemoore"}]}
{"id":"ovault-17a","title":"Implement --auto mode for ingest with confidence thresholds","description":"Add automatic acceptance for high-confidence extractions:\n- --auto flag enables auto-accept mode\n- --threshold flag sets confidence cutoff (default 0.8)\n- Extractions above threshold auto-accepted\n- Below threshold skipped (or queued for manual review)\n- Summary shows what was auto-processed vs skipped\n\nPart of: Phase 6 AI Ingest Command","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T13:31:43.255551-05:00","created_by":"alicemoore","updated_at":"2025-12-30T13:31:43.255551-05:00","dependencies":[{"issue_id":"ovault-17a","depends_on_id":"ovault-cox","type":"blocks","created_at":"2025-12-30T13:31:54.497412-05:00","created_by":"alicemoore"}]}
{"id":"ovault-18j","title":"Numbered select prompt renders repeatedly when selecting options","description":"When using numbered select to choose from dynamic options (e.g., milestone selection during task creation), pressing a number key causes the options to render again and again to the terminal.\n\nThis is a visual/UX bug in the numberedSelect implementation. The prompt should select immediately on number keypress without re-rendering.\n\nSuggests we need automated PTY testing to catch these interactive UI issues. Related to testing infrastructure improvements.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T14:34:12.252845-05:00","created_by":"alicemoore","updated_at":"2025-12-29T16:33:31.523392-05:00","closed_at":"2025-12-29T16:33:31.523392-05:00","close_reason":"Fixed in PR #11","dependencies":[{"issue_id":"ovault-18j","depends_on_id":"ovault-h4h","type":"blocks","created_at":"2025-12-29T16:12:12.264763-05:00","created_by":"alicemoore"}]}
{"id":"ovault-1bb","title":"Fix pnpm dev script to handle -- arguments correctly","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-30T15:05:28.547494-05:00","created_by":"alicemoore","updated_at":"2025-12-30T15:39:46.267034-05:00","closed_at":"2025-12-30T15:39:46.267034-05:00","close_reason":"Fixed by using sh wrapper to strip leading -- from arguments"}
{"id":"ovault-1ga","title":"Add schema-free vault-wide file scanning","description":"The navigation module currently requires a schema to scan vault files via discoverManagedFiles(schema, vaultDir). For vault-wide scanning that doesn't need type information, this coupling is unnecessary.\n\nAdd a simpler function like scanVaultMarkdown(vaultDir) that:\n- Scans all .md files in the vault\n- Respects .gitignore\n- Excludes .ovault and hidden directories\n- Doesn't require loading/parsing the schema\n\nThis would be useful for:\n- Navigation (open/link) when we just need file paths\n- Future full-text search\n- Any vault-wide operation that doesn't need type context\n\nThe schema-based discoverManagedFiles would remain for type-specific operations (audit, bulk by type, etc.).","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-28T16:10:31.93518-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:27.292134-05:00"}
{"id":"ovault-1kr","title":"Implement ovault schema enum management","description":"Enum CRUD operations:\n- ovault schema add-enum: create new enum\n- ovault schema edit-enum --add: add value\n- ovault schema edit-enum --rename: rename value (with file updates)\n- ovault schema edit-enum --remove: remove value (prompt for replacement)\n- ovault schema list-enums: show all enums with usage","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:45.286686-05:00","updated_at":"2025-12-30T19:03:24.309868-05:00","dependencies":[{"issue_id":"ovault-1kr","depends_on_id":"ovault-1ot","type":"blocks","created_at":"2025-12-25T08:58:51.602187-05:00","created_by":"alicemoore"}]}
{"id":"ovault-1ot","title":"Implement ovault schema show command","description":"Add schema exploration commands:\n- ovault schema show: tree view of all types/subtypes\n- ovault schema show \u003ctype\u003e: detailed view of specific type\n- ovault schema validate: check schema structure\n- Show shared fields, enums, field configurations\n- Pretty-print output with proper indentation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:56:58.833026-05:00","updated_at":"2025-12-26T12:27:38.725529-05:00","closed_at":"2025-12-26T12:27:38.725529-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-1ot","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:57:04.017597-05:00","created_by":"alicemoore"}]}
{"id":"ovault-1ts","title":"Port lib/list.sh to src/lib/vault.ts","description":"Port vault file operations:\n- listFiles() - enumerate files by type\n- findFile() - locate a specific file\n- discoverManagedFiles() - find all ovault-managed files\n- getVaultPath() - resolve vault location\n- Use fast-glob for pattern matching","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:28.743298-05:00","updated_at":"2025-12-26T12:10:30.764094-05:00","closed_at":"2025-12-26T12:10:30.764094-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-1ts","depends_on_id":"ovault-tdy","type":"blocks","created_at":"2025-12-25T08:55:35.581101-05:00","created_by":"alicemoore"}]}
{"id":"ovault-25h","title":"Comprehensive PTY tests for all prompt types","description":"## Background\n\nPTY test infrastructure was added in ovault-h4h to catch interactive UI bugs like ovault-18j.\n\n## Current State\n\n- PTY helpers created in tests/ts/lib/pty-helpers.ts\n- Tests for numberedSelect prompt covering:\n  - Number key selection\n  - Arrow key navigation (no excessive re-render)\n  - Ctrl+C abort\n  - First render preserves prior output\n\n## Remaining Work\n\nAdd PTY tests for other prompt types used in the codebase:\n\n1. **prompts library prompts** (from src/lib/prompt.ts)\n   - promptConfirm (y/n)\n   - promptInput (text input)\n   - promptRequired (required text)\n   - promptMultiInput (multi-line)\n\n2. **Specific command flows**\n   - `ovault new` full flow (type selection, name, fields)\n   - `ovault edit` field editing\n   - `ovault audit --fix` interactive fixes\n\n3. **Edge cases**\n   - Page navigation for large lists\n   - Empty choice handling\n   - Escape key abort\n\n## Notes\n\n- PTY tests are slower (~1s per test) so keep focused\n- Use withOvault() helper for automatic cleanup\n- May need to handle CI environments without TTY","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T16:32:07.548107-05:00","created_by":"alicemoore","updated_at":"2025-12-29T20:35:58.641915-05:00","closed_at":"2025-12-29T20:35:58.641915-05:00","close_reason":"Implemented in PR #12"}
{"id":"ovault-2i6","title":"Clarify prompt module architecture (prompt.ts vs numberedSelect.ts)","description":"## Problem\n\nThe relationship between prompt.ts and numberedSelect.ts is not immediately obvious:\n- `prompt.ts` exports high-level functions: promptSelection, promptConfirm, promptInput, promptRequired, promptMultiInput\n- `numberedSelect.ts` is a custom implementation that promptSelection wraps\n- `prompts` (npm package) is used by promptConfirm, promptInput, etc.\n\n## What went wrong\n\nWhen fixing Ctrl+C quit behavior, I had to:\n1. First check prompt.ts to understand what promptSelection does\n2. Discover it just calls numberedSelect()\n3. Go to numberedSelect.ts to find the actual implementation\n4. Understand the NumberedSelectResult interface and aborted flag\n5. Come back to prompt.ts to update the return type\n\nSimilarly, promptConfirm uses the `prompts` npm package with different cancellation semantics than numberedSelect. The inconsistent return types (boolean vs string | undefined) made it unclear how to handle cancellation uniformly.\n\n## Current state\n\n- numberedSelect returns `{ value, index, aborted }` but the wrapper loses `aborted`\n- prompt.ts mixed return conventions: some returned undefined, some returned the raw value\n- After fixes: promptSelection returns `string | null`, promptConfirm returns `boolean | null`\n\n## Suggestions\n\n1. **Document the architecture** - Add a header comment to prompt.ts explaining:\n   - numberedSelect.ts = custom TTY-based selection (supports number keys, pagination)\n   - prompts package = used for simple confirm/input (lighter weight)\n   - Why we have both (numberedSelect has features prompts doesn't)\n\n2. **Consider consolidating** - Could numberedSelect also handle confirm prompts? This would give consistent cancellation handling.\n\n3. **Type exports** - Export a common `PromptResult\u003cT\u003e` type that all prompts use, making null = cancelled explicit in the type system.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:38:17.851864-05:00","created_by":"alicemoore","updated_at":"2025-12-29T12:57:35.0641-05:00","closed_at":"2025-12-29T12:57:35.0641-05:00","close_reason":"Closed"}
{"id":"ovault-2uz","title":"Add body content templating in ovault new command","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-30T18:56:27.676503-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:23.357831-05:00"}
{"id":"ovault-307","title":"Extract UserCancelledError to shared errors module","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-30T15:05:28.028499-05:00","created_by":"alicemoore","updated_at":"2025-12-30T16:02:46.02853-05:00","closed_at":"2025-12-30T16:02:46.02853-05:00","close_reason":"Extracted to src/lib/errors.ts - PR #20"}
{"id":"ovault-31k","title":"Implement template constraints","description":"Add validation rules to templates:\n- constraints section in template frontmatter\n- required: true to make optional fields required\n- validate: expression for custom validation\n- error: custom error message\n- Use query expression syntax for validation\n- Validate constraints at note creation time\n- Report constraint violations clearly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:08.610484-05:00","updated_at":"2025-12-30T17:06:32.067502-05:00","closed_at":"2025-12-30T17:06:32.067502-05:00","close_reason":"Completed in PR #22","dependencies":[{"issue_id":"ovault-31k","depends_on_id":"ovault-llv","type":"blocks","created_at":"2025-12-25T08:58:13.849348-05:00","created_by":"alicemoore"}]}
{"id":"ovault-33b","title":"Add ovault template command for template management","description":"Create CLI commands for managing templates within ovault:\n\n- ovault template new \u003ctype\u003e - Create a new template interactively\n- ovault template list [type] - List available templates\n- ovault template validate - Validate all templates against schema\n- ovault template edit \u003ctype\u003e \u003cname\u003e - Edit an existing template\n\nThis would provide a safer, more guided experience than manually editing template files. Consider moving templates to .ovault/templates/ to prevent accidental user edits.\n\nRelated to Phase 3: Template System (ovault-9rl).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-29T14:34:04.778863-05:00","created_by":"alicemoore","updated_at":"2025-12-30T14:49:23.084485-05:00","closed_at":"2025-12-30T14:49:23.084485-05:00","close_reason":"Implemented template command with list, show, validate, new, and edit subcommands. Templates moved to .ovault/templates/. PR #19 merged."}
{"id":"ovault-3gb","title":"Add ovault template delete/remove command","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T19:00:58.02294-05:00","created_by":"alicemoore","updated_at":"2025-12-31T13:55:02.354844-05:00","closed_at":"2025-12-31T13:55:02.354844-05:00","close_reason":"Implemented in PR #32 - template delete command now available"}
{"id":"ovault-3ig","title":"Consolidate test schemas into shared fixtures","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T20:39:13.094981-05:00","created_by":"alicemoore","updated_at":"2025-12-30T20:39:13.094981-05:00"}
{"id":"ovault-3nd","title":"Implement schema migration system","description":"Track and apply schema changes:\n- Schema versioning in schema.json\n- Track pending migrations\n- ovault schema diff: show pending changes\n- ovault schema apply: execute migrations\n- Auto-apply deterministic changes\n- Prompt for non-deterministic changes\n- Log migration history","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:51.798109-05:00","updated_at":"2025-12-30T19:03:24.408336-05:00","dependencies":[{"issue_id":"ovault-3nd","depends_on_id":"ovault-1kr","type":"blocks","created_at":"2025-12-25T08:58:56.754727-05:00","created_by":"alicemoore"},{"issue_id":"ovault-3nd","depends_on_id":"ovault-bj7","type":"blocks","created_at":"2025-12-25T08:58:56.92472-05:00","created_by":"alicemoore"}]}
{"id":"ovault-3ni","title":"Update AGENTS.md with TypeScript conventions","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T15:05:29.799058-05:00","created_by":"alicemoore","updated_at":"2025-12-31T13:05:28.6522-05:00","closed_at":"2025-12-31T13:05:28.6522-05:00","close_reason":"Issue too unspecific - closing without action"}
{"id":"ovault-3ql","title":"Dynamic select prompts should offer 'None' option for optional fields","description":"When creating a note with optional dynamic fields (like milestone for tasks), the numbered select prompt doesn't offer a way to skip/leave empty. The top option should always be something like 'None' or '(skip)'.\n\nCurrently, Ctrl+C exits the entire process (by design after recent refactor), so there's no way to leave an optional dynamic field empty.\n\nRelated: Consider making Escape key behave as 'choose none' for optional fields, while Ctrl+C remains 'exit process'. This needs investigation into prompt library capabilities.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-29T14:33:49.399058-05:00","created_by":"alicemoore","updated_at":"2025-12-29T15:50:04.802671-05:00","closed_at":"2025-12-29T15:50:04.802671-05:00","close_reason":"Implemented (skip) option for optional select/dynamic fields in new command, and (keep current) option in edit command. Tests pass, typecheck passes."}
{"id":"ovault-3un","title":"Implement bulk --move with wikilink auto-update","description":"Add file move operation with link updates:\n- --move path: relocate files to new directory\n- Scan vault for wikilinks to moved files\n- Update all wikilinks to point to new location\n- Handle all wikilink formats: [[File]], [[File|Alias]], [[File#Heading]]\n- Respect shortest-path link preference\n- Report link updates made","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:57:42.899561-05:00","updated_at":"2025-12-28T07:43:47.279748-05:00","closed_at":"2025-12-28T07:43:47.279748-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-3un","depends_on_id":"ovault-bj7","type":"blocks","created_at":"2025-12-25T08:57:47.434301-05:00","created_by":"alicemoore"}]}
{"id":"ovault-41g","title":"Phase 1: Core CLI Polish","description":"Core features that enhance the CLI experience. Depends on TypeScript migration.\n\nIncludes:\n- Shared fields support\n- Directory modes (pooled vs instance-grouped)\n- Open in Obsidian\n- Query system with Bases parity\n- Schema show command\n\nSee plans/roadmap.md Phase 1 section.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-25T08:56:33.618512-05:00","updated_at":"2025-12-26T12:27:38.80028-05:00","closed_at":"2025-12-26T12:27:38.80028-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-41g","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:56:42.542506-05:00","created_by":"alicemoore"}]}
{"id":"ovault-44z","title":"Add ovault delete/remove command for notes","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-30T19:00:58.620429-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:25.340625-05:00"}
{"id":"ovault-48g","title":"Neovim: Dashboard integration for saved queries","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T18:56:33.292837-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:26.760803-05:00","dependencies":[{"issue_id":"ovault-48g","depends_on_id":"ovault-tic","type":"blocks","created_at":"2025-12-30T18:56:40.066503-05:00","created_by":"alicemoore"},{"issue_id":"ovault-48g","depends_on_id":"ovault-f9u","type":"blocks","created_at":"2025-12-30T18:56:40.117254-05:00","created_by":"alicemoore"},{"issue_id":"ovault-48g","depends_on_id":"ovault-01u","type":"blocks","created_at":"2025-12-30T20:15:27.295836-05:00","created_by":"alicemoore"}]}
{"id":"ovault-48r","title":"Port lib/body.sh to src/lib/frontmatter.ts","description":"Port frontmatter parsing and writing:\n- parseFrontmatter() - extract frontmatter and body from markdown\n- writeFrontmatter() - serialize frontmatter back to markdown\n- updateFrontmatter() - modify specific fields preserving order\n- Use gray-matter library for parsing\n- Preserve field order and body content","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:22.604936-05:00","updated_at":"2025-12-26T12:09:59.556469-05:00","closed_at":"2025-12-26T12:09:59.556469-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-48r","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:55:28.559082-05:00","created_by":"alicemoore"}]}
{"id":"ovault-4ex","title":"Enable additional strict tsconfig options","description":"Add the following strict compiler options to tsconfig.json:\n\n1. `\"allowUnreachableCode\": false` - Error on unreachable code\n2. `\"exactOptionalPropertyTypes\": true` - Distinguishes between undefined and missing optional properties  \n3. `\"noImplicitOverride\": true` - Requires override keyword for overriding class members\n\nShould be done before too many more changes to avoid accumulating violations.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:51:36.239894-05:00","updated_at":"2025-12-27T10:50:55.237936-05:00","closed_at":"2025-12-27T10:50:55.237936-05:00","close_reason":"Closed"}
{"id":"ovault-5jk","title":"Consolidate file discovery logic (audit/detection.ts → discovery.ts)","description":"There's duplicated code between src/lib/audit/detection.ts and src/lib/discovery.ts:\n\n- collectAllMarkdownFiles\n- getExcludedDirectories  \n- loadGitignore\n- collectFilesForType (and related helpers)\n\nThe discovery.ts module was created for navigation, but audit/detection.ts still has its own copies of these functions.\n\nRefactor to have audit/detection.ts import from discovery.ts to eliminate duplication and ensure consistent behavior.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T16:10:22.500767-05:00","created_by":"alicemoore","updated_at":"2025-12-30T08:43:23.54558-05:00","closed_at":"2025-12-30T08:43:23.54558-05:00","close_reason":"Consolidated in PR #16"}
{"id":"ovault-5li","title":"Implement parent templates for instance scaffolding","description":"Add instance scaffolding to templates:\n- instances array in template frontmatter\n- Each instance: subtype, filename, template, defaults\n- Create parent note and all specified subtypes\n- Support nested templates for subtypes\n- Report all files created\n- Works with instance-grouped directory mode","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:14.041103-05:00","updated_at":"2025-12-30T17:06:32.06867-05:00","closed_at":"2025-12-30T17:06:32.06867-05:00","close_reason":"Completed in PR #22","dependencies":[{"issue_id":"ovault-5li","depends_on_id":"ovault-31k","type":"blocks","created_at":"2025-12-25T08:58:18.666835-05:00","created_by":"alicemoore"},{"issue_id":"ovault-5li","depends_on_id":"ovault-cxe","type":"blocks","created_at":"2025-12-25T08:58:18.835963-05:00","created_by":"alicemoore"}]}
{"id":"ovault-5xd","title":"Port ovault new command","description":"Port the new note creation command:\n- Parse type/subtype argument\n- Load schema and get type configuration\n- Prompt for field values (using prompts library)\n- Generate frontmatter with correct field order\n- Create file in correct directory\n- Handle both pooled and instance-grouped modes","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:42.500884-05:00","updated_at":"2025-12-26T12:10:53.375711-05:00","closed_at":"2025-12-26T12:10:53.375711-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-5xd","depends_on_id":"ovault-tdy","type":"blocks","created_at":"2025-12-25T08:55:48.290943-05:00","created_by":"alicemoore"},{"issue_id":"ovault-5xd","depends_on_id":"ovault-48r","type":"blocks","created_at":"2025-12-25T08:55:48.45552-05:00","created_by":"alicemoore"},{"issue_id":"ovault-5xd","depends_on_id":"ovault-1ts","type":"blocks","created_at":"2025-12-25T08:55:48.62125-05:00","created_by":"alicemoore"}]}
{"id":"ovault-6f0","title":"Link validator and normalizer for audit command","description":"Add link validation and normalization to the audit command:\n\n**Link Validation:**\n- Detect dead/broken wikilinks and markdown links\n- Option to remove dead links (--fix mode)\n- Report link targets that don't exist\n\n**Link Normalization:**\n- Convert all links to a consistent style across the vault\n- Supported styles: wikilink, markdown, shortest-path, absolute-path\n- Example: ovault audit --normalize-links wikilink\n\nThis extends the existing audit infrastructure with link-aware checks.\n\nSee also: ovault-lsp (LSP server feature)","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-30T20:14:45.147653-05:00","created_by":"alicemoore","updated_at":"2025-12-30T20:14:45.147653-05:00"}
{"id":"ovault-6zj","title":"Add ovault recent/history command for recently touched notes","description":"Track notes touched via ovault CLI. Could be standalone command or flag on search. First step: interview user for desired UX and interactions.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-30T19:01:00.582927-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:25.390079-05:00"}
{"id":"ovault-77w","title":"Port ovault list command with expression filtering","description":"Port the list command with enhanced filtering:\n- Parse type argument\n- Load files of that type\n- Parse and evaluate --where expressions\n- Format output as table\n- Support --fields to select columns\n- Support --format for json/csv output\n- Use expression parser for filter evaluation","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:54.717441-05:00","updated_at":"2025-12-26T12:49:50.244328-05:00","closed_at":"2025-12-26T12:49:50.244328-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-77w","depends_on_id":"ovault-1ts","type":"blocks","created_at":"2025-12-25T08:56:00.68568-05:00","created_by":"alicemoore"},{"issue_id":"ovault-77w","depends_on_id":"ovault-9pc","type":"blocks","created_at":"2025-12-25T08:56:00.866669-05:00","created_by":"alicemoore"}]}
{"id":"ovault-8c9","title":"Add ai-process-stage frontmatter field support","description":"Add support for tracking AI processing state in note frontmatter:\n- ai-process-stage: to-process | processing | processed | needs-review\n- ai-last-processed: ISO timestamp\n- ai-schema-version: schema version when last processed\n- ai-extractions: list of created/linked items\n\nThis enables:\n- Tracking which notes have been ingested\n- Re-processing when schema changes\n- Resuming failed processing\n\nPart of: Phase 6 AI Ingest Command","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T13:31:28.898701-05:00","created_by":"alicemoore","updated_at":"2025-12-30T13:31:28.898701-05:00"}
{"id":"ovault-9pc","title":"Implement expression parser for query system","description":"Create query expression parser using jsep:\n- Parse comparison expressions (==, !=, \u003c, \u003e, etc.)\n- Parse boolean expressions (\u0026\u0026, ||, !)\n- Parse function calls (contains, isEmpty, today, etc.)\n- Parse field access and member expressions\n- Implement expression evaluation with context\n- Add duration literal parsing ('7d', '1w', etc.)\n\nSee plans/features/query-system.md for full operator/function list.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:55:35.762606-05:00","updated_at":"2025-12-26T12:24:09.708482-05:00","closed_at":"2025-12-26T12:24:09.708482-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-9pc","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:55:42.315361-05:00","created_by":"alicemoore"}]}
{"id":"ovault-9rl","title":"Phase 3: Template System","description":"Reusable note templates with defaults, constraints, and scaffolding. Depends on Phase 1.\n\nIncludes:\n- Basic templates with defaults and body structure\n- Template constraints (validation rules)\n- Parent templates for instance scaffolding\n- Template discovery and selection\n\nSee plans/features/template-system.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-25T08:57:53.902245-05:00","updated_at":"2025-12-30T17:06:32.069322-05:00","closed_at":"2025-12-30T17:06:32.069322-05:00","close_reason":"Completed in PR #22","dependencies":[{"issue_id":"ovault-9rl","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:58:02.082921-05:00","created_by":"alicemoore"}]}
{"id":"ovault-9u4","title":"Complete skipped PTY tests for complex flows","description":"The comprehensive PTY tests PR (#12) includes several skipped tests that need completion:\n\n## Skipped Test Files\n- `audit-fix.pty.test.ts` - entire file skipped (12 tests)\n\n## Skipped Individual Tests\n- `new.pty.test.ts`: Template handling (3 tests)\n- `edit.pty.test.ts`: Field updates, body sections (3 tests)\n\n## Why They're Skipped\nThese tests involve complex multi-prompt flows where timing coordination is tricky:\n- Template selection requires directory setup + prompt navigation\n- Edit command needs to complete all prompts before saving\n- Audit --fix has nested confirm/select prompts per issue\n\n## Approach\nWork through these one-by-one:\n1. Start with simpler ones (template selection)\n2. Add waitForStable() calls between prompts\n3. Consider adding PTY helper for multi-step flows\n\n## References\n- PR #12 added the test infrastructure\n- See existing passing tests for patterns","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T06:16:30.147344-05:00","created_by":"alicemoore","updated_at":"2025-12-30T20:35:17.808121-05:00","closed_at":"2025-12-30T20:35:17.808121-05:00","close_reason":"Completed in PR #24. Enabled 17 previously-skipped PTY tests across audit-fix, new, and edit commands."}
{"id":"ovault-9xi","title":"Phase 2: Audit \u0026 Bulk Operations","description":"Vault health and mass operations. Depends on Phase 1.\n\nIncludes:\n- Audit command (report, fix, strict modes)\n- Bulk operations (set, rename, move, delete)\n- Wikilink auto-update on file moves\n\nSee plans/features/audit-command.md and plans/features/bulk-operations.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-25T08:57:11.235661-05:00","updated_at":"2025-12-28T07:43:57.506618-05:00","closed_at":"2025-12-28T07:43:57.506618-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-9xi","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:57:18.792693-05:00","created_by":"alicemoore"}]}
{"id":"ovault-a8o","title":"Add includeTemplates option to withTempVault PTY helper","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T15:05:29.239352-05:00","created_by":"alicemoore","updated_at":"2025-12-31T08:05:11.488077-05:00","closed_at":"2025-12-31T08:05:11.488077-05:00","close_reason":"Implemented includeTemplates option for withTempVault in PR #27"}
{"id":"ovault-acb","title":"Full-text search across vault notes","description":"Add ability to search for notes by their content, not just by name/path.\n\nThis feature needs exploration to determine the best approach:\n\nQuestions to answer:\n- Should we build an index, or do live searching (ripgrep)?\n- How to integrate with existing type/filter system (e.g., search within tasks only)?\n- Should results show matching lines/context?\n- How to handle large vaults efficiently?\n- Integration with fzf for interactive filtering of results?\n\nPotential approaches:\n1. Simple ripgrep wrapper with type filtering\n2. Build a search index (like Obsidian's) for faster queries\n3. Hybrid: live search with caching\n\nUse cases:\n- Find all notes mentioning a specific term\n- Search within a specific type (e.g., tasks containing 'deploy')\n- Combine with existing --where filters\n\nThis would complement the existing navigation commands (open/link) by allowing content-based discovery rather than just name-based.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-28T16:06:49.506447-05:00","created_by":"alicemoore","updated_at":"2025-12-30T14:15:16.881776-05:00","closed_at":"2025-12-30T14:15:16.881776-05:00","close_reason":"Implemented full-text content search with ripgrep"}
{"id":"ovault-acd","title":"Phase 6: AI Ingest Command","description":"AI-powered extraction of tasks, ideas, and entities from unstructured notes (daily notes, journals, meeting notes). Bridges free-form journaling and structured knowledge management.\n\nSee: plans/features/ai-ingest.md\n\nCore features:\n- Scan notes and extract tasks, ideas, entities via AI\n- Interactive approval flow (accept/edit/reject)\n- Entity matching against existing vault notes\n- Processing state tracking (to-process/processed/needs-review)\n- Schema-aware re-indexing when schema changes\n- Cost tracking integration\n\nDepends on:\n- Schema migration system (for re-indexing triggers)\n- Full-text search (for entity matching)","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-30T13:31:11.345675-05:00","created_by":"alicemoore","updated_at":"2025-12-30T13:31:20.691767-05:00","dependencies":[{"issue_id":"ovault-acd","depends_on_id":"ovault-8c9","type":"blocks","created_at":"2025-12-30T13:31:54.599438-05:00","created_by":"alicemoore"},{"issue_id":"ovault-acd","depends_on_id":"ovault-ha1","type":"blocks","created_at":"2025-12-30T13:31:54.649942-05:00","created_by":"alicemoore"},{"issue_id":"ovault-acd","depends_on_id":"ovault-mgh","type":"blocks","created_at":"2025-12-30T13:31:54.700828-05:00","created_by":"alicemoore"},{"issue_id":"ovault-acd","depends_on_id":"ovault-cox","type":"blocks","created_at":"2025-12-30T13:31:54.752461-05:00","created_by":"alicemoore"},{"issue_id":"ovault-acd","depends_on_id":"ovault-h9o","type":"blocks","created_at":"2025-12-30T13:31:54.804009-05:00","created_by":"alicemoore"},{"issue_id":"ovault-acd","depends_on_id":"ovault-17a","type":"blocks","created_at":"2025-12-30T13:31:54.855737-05:00","created_by":"alicemoore"},{"issue_id":"ovault-acd","depends_on_id":"ovault-vy7","type":"blocks","created_at":"2025-12-30T13:31:54.906826-05:00","created_by":"alicemoore"}]}
{"id":"ovault-aeh","title":"Document audit type path requirement for proper type inference","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T20:39:06.904046-05:00","created_by":"alicemoore","updated_at":"2025-12-30T20:39:06.904046-05:00"}
{"id":"ovault-bj7","title":"Implement ovault bulk command","description":"Add bulk operations per plans/features/bulk-operations.md:\n- --set field=value: set field\n- --set field=: clear field\n- --rename old=new: rename field\n- --delete field: delete field\n- --append field=value: add to list\n- --remove field=value: remove from list\n- --where expression: filter targets\n- Dry-run by default, --execute to apply\n- --backup option for safety\n- Git status warnings","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:57:33.966353-05:00","updated_at":"2025-12-28T06:39:46.253619-05:00","closed_at":"2025-12-28T06:39:46.253619-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-bj7","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:57:42.707283-05:00","created_by":"alicemoore"}]}
{"id":"ovault-bjg","title":"Extract shared resolveAndPick helper for open/link commands","description":"The open and link commands have nearly identical logic for:\n1. Resolving a query against the note index\n2. Handling exact match vs ambiguous/fuzzy matches\n3. Invoking the picker when needed\n4. Handling picker errors and cancellation\n\nThis is ~40 lines of duplicated code in each command.\n\nExtract a shared helper like:\n\n```typescript\nasync function resolveAndPick(\n  index: NoteIndex,\n  query: string | undefined,\n  options: {\n    pickerMode: PickerMode;\n    prompt: string;\n    jsonMode: boolean;\n  }\n): Promise\u003cManagedFile | null\u003e\n```\n\nThis would:\n- Handle the no-query case (show all files)\n- Handle exact match (return directly)\n- Handle ambiguous/fuzzy (invoke picker)\n- Handle errors consistently (JSON or text output)\n- Return null on cancellation\n\nBenefits:\n- DRY up open.ts and link.ts\n- Consistent error handling\n- Easier to add new commands that need file selection","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T16:10:42.135898-05:00","created_by":"alicemoore","updated_at":"2025-12-30T08:17:31.19691-05:00","closed_at":"2025-12-30T08:17:31.19691-05:00","close_reason":"Extracted resolveAndPick helper in PR #15. Removes ~76 lines of duplicated code from each command."}
{"id":"ovault-boe","title":"Rename link command to search with output format flags","description":"Refactor the `link` command into a more general `search` command with output format flags.\n\nCurrent:\n- `ovault link [query]` outputs `[[Name]]`\n- `ovault link [query] --bare` outputs `Name`\n\nProposed:\n- `ovault search [query]` outputs filename (default)\n- `ovault search [query] --wikilink` outputs `[[Name]]`\n- `ovault search [query] --path` outputs vault-relative path\n- `ovault search [query] --content` outputs full file contents\n- `ovault search [query] --output json` outputs JSON with name, path, content\n\nBehavior:\n- No query → picker to browse all notes\n- Ambiguous query → picker to select\n- Exact match → immediate result\n- `--picker none` → error on ambiguity (for scripting)\n- `--output json` with multiple matches → return array of all matches\n\nRemove the `link` command entirely (breaking change acceptable at this early stage).\n\nJSON output structure:\n```json\n{\n  \"success\": true,\n  \"name\": \"My Note\",\n  \"path\": \"Ideas/My Note.md\",\n  \"content\": \"---\\ntype: idea\\n---\\n\\nBody here\"\n}\n```","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-29T14:46:53.988809-05:00","created_by":"alicemoore","updated_at":"2025-12-30T13:04:33.321183-05:00","closed_at":"2025-12-30T13:04:33.321183-05:00","close_reason":"Implemented in PR #17 - link command renamed to search with flexible output formats"}
{"id":"ovault-c2i","title":"CLI navigation: open-by-query + link generator","description":"Add CLI-first navigation helpers inspired by obsidian.nvim, but scoped to ovault-managed files only (respect schema-managed directories / exclusions).\n\nScope (no backlinks):\n- Extend ovault open to accept a note query (name/path) and resolve ambiguities with a picker.\n- Add ovault link to print a wikilink to a target note (default shortest-path behavior, consistent with bulk move link updates).\n- Optional fzf integration (fallback to numberedSelect).\n- All commands should support non-interactive usage (require unambiguous query + machine output) so Neovim wrappers can shell out later.\n\nNon-goals:\n- Backlinks command (defer)\n- Full-path link style migration (keep shortest as default)\n\nNotes:\n- Search space should be limited to files managed by ovault (e.g. via audit/discovery logic), not the entire vault.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-28T11:43:07.972794-05:00","created_by":"alicemoore","updated_at":"2025-12-28T15:45:20.924354-05:00","closed_at":"2025-12-28T15:45:20.924354-05:00","close_reason":"Implemented CLI navigation with open-by-query and link generator"}
{"id":"ovault-c2i.1","title":"Navigation resolver: managed note index + query resolution","description":"Create a shared lib to discover ovault-managed .md files (reuse audit/discovery + exclusions), build an index (basename↔paths), and resolve open/link queries. Must support exact match by vault-relative path or basename; if ambiguous, return candidate list for picker; if non-interactive, require unambiguous match and exit with structured JSON error.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T11:43:58.411389-05:00","created_by":"alicemoore","updated_at":"2025-12-28T15:45:15.035969-05:00","closed_at":"2025-12-28T15:45:15.035969-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-c2i.1","depends_on_id":"ovault-c2i","type":"parent-child","created_at":"2025-12-28T11:43:58.412656-05:00","created_by":"alicemoore"}]}
{"id":"ovault-c2i.2","title":"Picker abstraction: fzf integration + fallback","description":"Add a picker abstraction for selecting among candidate notes: modes auto|fzf|numbered|none. auto prefers fzf when available + TTY, else uses numberedSelect. none disallows ambiguity (for scripting/Neovim wrappers) and returns an error listing candidates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T11:44:07.4991-05:00","created_by":"alicemoore","updated_at":"2025-12-28T15:45:15.036784-05:00","closed_at":"2025-12-28T15:45:15.036784-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-c2i.2","depends_on_id":"ovault-c2i","type":"parent-child","created_at":"2025-12-28T11:44:07.49974-05:00","created_by":"alicemoore"}]}
{"id":"ovault-c2i.3","title":"Extend ovault open: query resolution + --app","description":"Update ovault open to accept a note query (not just a literal file path). Resolve within ovault-managed files only. Add --app flag (obsidian|editor|system|print) and --picker flag to control selection when ambiguous; support --output json for scripting.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T11:44:16.872351-05:00","created_by":"alicemoore","updated_at":"2025-12-28T15:45:15.037347-05:00","closed_at":"2025-12-28T15:45:15.037347-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-c2i.3","depends_on_id":"ovault-c2i","type":"parent-child","created_at":"2025-12-28T11:44:16.872937-05:00","created_by":"alicemoore"},{"issue_id":"ovault-c2i.3","depends_on_id":"ovault-c2i.1","type":"blocks","created_at":"2025-12-28T11:45:02.114535-05:00","created_by":"alicemoore"},{"issue_id":"ovault-c2i.3","depends_on_id":"ovault-c2i.2","type":"blocks","created_at":"2025-12-28T11:45:02.162086-05:00","created_by":"alicemoore"}]}
{"id":"ovault-c2i.4","title":"Add ovault link command (shortest wikilink)","description":"Add a new CLI command: ovault link [query]. Resolves target note within ovault-managed files and prints a wikilink. Link target follows shortest-path behavior consistent with bulk move link updates (basename when unique, else vault-relative path without .md). Provide --picker and --output json.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T11:44:26.390528-05:00","created_by":"alicemoore","updated_at":"2025-12-28T15:45:15.037879-05:00","closed_at":"2025-12-28T15:45:15.037879-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-c2i.4","depends_on_id":"ovault-c2i","type":"parent-child","created_at":"2025-12-28T11:44:26.391682-05:00","created_by":"alicemoore"},{"issue_id":"ovault-c2i.4","depends_on_id":"ovault-c2i.1","type":"blocks","created_at":"2025-12-28T11:45:02.209273-05:00","created_by":"alicemoore"},{"issue_id":"ovault-c2i.4","depends_on_id":"ovault-c2i.2","type":"blocks","created_at":"2025-12-28T11:45:02.253762-05:00","created_by":"alicemoore"}]}
{"id":"ovault-c2i.5","title":"Tests + docs for open/link navigation","description":"Add unit tests for query resolution + shortest-link selection, and integration tests for open/link in non-interactive mode (--picker none, --output json) using existing test vault fixtures. Update README with new command usage and examples.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T11:44:34.173197-05:00","created_by":"alicemoore","updated_at":"2025-12-28T15:45:15.038383-05:00","closed_at":"2025-12-28T15:45:15.038383-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-c2i.5","depends_on_id":"ovault-c2i","type":"parent-child","created_at":"2025-12-28T11:44:34.174251-05:00","created_by":"alicemoore"},{"issue_id":"ovault-c2i.5","depends_on_id":"ovault-c2i.3","type":"blocks","created_at":"2025-12-28T11:45:02.298097-05:00","created_by":"alicemoore"},{"issue_id":"ovault-c2i.5","depends_on_id":"ovault-c2i.4","type":"blocks","created_at":"2025-12-28T11:45:02.342429-05:00","created_by":"alicemoore"}]}
{"id":"ovault-cox","title":"Implement interactive approval flow for ingest","description":"Build the interactive CLI for reviewing AI extractions:\n- Display extraction with confidence, context, proposed action\n- Accept/Edit/Reject/Skip/Quit controls\n- For entities: show existing matches, offer create new or link\n- Edit mode for modifying titles/fields before creation\n- Summary at end showing what was created/linked/skipped\n\nReuse patterns from audit --fix interactive flow.\n\nPart of: Phase 6 AI Ingest Command","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T13:31:38.370046-05:00","created_by":"alicemoore","updated_at":"2025-12-30T13:31:38.370046-05:00","dependencies":[{"issue_id":"ovault-cox","depends_on_id":"ovault-mgh","type":"blocks","created_at":"2025-12-30T13:31:54.391487-05:00","created_by":"alicemoore"}]}
{"id":"ovault-cr7","title":"Rename ovault to pika","description":"Rename the tool to 'pika' after the creature who fastidiously makes its nest. The tool is becoming more Neovim-focused than Obsidian-focused, so ovault no longer fits. Other name ideas considered: nscheme, nvault, neozettel, neopkm, npkm - but pika wins.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-30T20:05:39.136937-05:00","created_by":"alicemoore","updated_at":"2025-12-30T20:05:39.136937-05:00"}
{"id":"ovault-cxe","title":"Implement directory modes (pooled and instance-grouped)","description":"Add directory mode support per plans/features/directory-modes.md:\n- Add dir_mode field to type schema (pooled | instance-grouped)\n- Pooled: all files in output_dir\n- Instance-grouped: files under parent instance folders\n- Parent type = instance field for subtypes\n- Create parent note with same name as folder\n- Update ovault new to prompt for instance when needed\n- Update ovault list to show instances for instance-grouped types\n- Add filename patterns for subtypes ({n}, {date}, etc.)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:52.507728-05:00","updated_at":"2025-12-26T12:26:20.439661-05:00","closed_at":"2025-12-26T12:26:20.439661-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-cxe","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:56:58.64821-05:00","created_by":"alicemoore"}]}
{"id":"ovault-deg","title":"Add integration tests for edit command","description":"Add comprehensive integration tests for the edit command.\n\nThe edit command is interactive and uses the prompts library which requires TTY, making it difficult to test via piped stdin.\n\nOptions to explore:\n- Mock the prompts module in vitest\n- Add non-interactive flags (e.g. --set field=value) to edit command\n- Use a TTY simulation library\n\nTest cases needed:\n- File loading and type detection\n- Frontmatter field editing\n- Body preservation after edit\n- Error handling (file not found, invalid type)\n- --open flag functionality","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T13:18:58.901516-05:00","updated_at":"2025-12-31T08:36:00.403022-05:00","closed_at":"2025-12-31T08:36:00.403022-05:00","close_reason":"Completed in PR #29 - added 27 integration tests for edit command"}
{"id":"ovault-dl5","title":"Extract shared applyFrontmatterFilters helper from list and search commands","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T14:17:55.820809-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:16:32.157553-05:00","closed_at":"2025-12-30T19:16:32.157553-05:00","close_reason":"Implemented in PR #23"}
{"id":"ovault-doh","title":"Add integration tests for CLI commands","description":"End-to-end testing of CLI:\n- Test ovault new with various types\n- Test ovault edit with --set flags\n- Test ovault list with --where filters\n- Test ovault open\n- Test error handling and edge cases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:20.710105-05:00","updated_at":"2025-12-26T13:18:50.266046-05:00","closed_at":"2025-12-26T13:18:50.266046-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-doh","depends_on_id":"ovault-rlj","type":"blocks","created_at":"2025-12-25T08:56:26.736749-05:00","created_by":"alicemoore"}]}
{"id":"ovault-dxf","title":"Implement shared fields support","description":"Add shared fields feature per plans/features/shared-fields.md:\n- Add shared_fields section to schema structure\n- Implement opt-in model (types list which shared fields to include)\n- Support field_overrides for type-specific defaults\n- Merge shared fields with type fields in getFieldsForType()\n- Shared fields appear first by default\n- Update new/edit commands to handle shared fields\n- Add tests for shared field merging and ordering","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:42.739778-05:00","updated_at":"2025-12-26T12:18:50.373001-05:00","closed_at":"2025-12-26T12:18:50.373001-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-dxf","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:56:52.317156-05:00","created_by":"alicemoore"}]}
{"id":"ovault-f9u","title":"Implement dashboards (saved list queries)","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-30T18:56:31.038752-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:25.894178-05:00"}
{"id":"ovault-gqj","title":"Add relative date support in templates (today, +N days)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-30T18:56:26.173858-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:23.25665-05:00"}
{"id":"ovault-h4h","title":"Add TTY-based tests for interactive prompts","description":"## Problem\n\nThe numberedSelect prompt had a bug that tests didn't catch: on first render, it called clearPrompt() which erased lines printed BEFORE the prompt started. This caused the file path and error message to disappear in audit --fix.\n\n## The bug\n\nIn render(), clearPrompt() was called even on first render when there was nothing to clear, so it cleared lines printed before the prompt (file path, error message).\n\nFixed by adding a firstRender flag, but this class of bug can't be caught without TTY tests.\n\n## Why current tests missed it\n\nnumberedSelect tests are unit tests for internal logic (pagination, cursor, keys). They don't render to a terminal. The rendering path requires: real TTY, raw mode, keypress events.\n\n## Proposed solution\n\nAdd PTY-based integration tests using node-pty:\n\n1. Test first render preserves prior output\n2. Test Ctrl+C returns aborted result  \n3. Test navigation doesn't corrupt display\n\n## Alternatives\n\n- Snapshot test render() output strings\n- Mock stdout.write and verify ANSI sequences\n- Manual test script (current approach in prompt-quit.test.ts)","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-27T12:38:49.063468-05:00","created_by":"alicemoore","updated_at":"2025-12-29T16:33:31.522317-05:00","closed_at":"2025-12-29T16:33:31.522317-05:00","close_reason":"Fixed in PR #11"}
{"id":"ovault-h9o","title":"Implement entity matching for ingest","description":"When AI extracts an entity, search vault for existing matches:\n- Exact name match (file basename)\n- Alias match (aliases frontmatter field)\n- Fuzzy match (Levenshtein distance)\n- Full-text search (entity name in content)\n\nPresent matches ranked by confidence, allow user to select or create new.\n\nDepends on: Full-text search across vault notes (ovault-acb)\n\nPart of: Phase 6 AI Ingest Command","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T13:31:40.626559-05:00","created_by":"alicemoore","updated_at":"2025-12-30T13:31:40.626559-05:00","dependencies":[{"issue_id":"ovault-h9o","depends_on_id":"ovault-acb","type":"blocks","created_at":"2025-12-30T13:31:54.446479-05:00","created_by":"alicemoore"}]}
{"id":"ovault-ha1","title":"Implement ovault ingest command skeleton","description":"Create the basic ovault ingest command with:\n- File/glob argument parsing\n- --type flag for type-based selection\n- --pending flag for to-process/needs-review notes\n- --dry-run flag (show extractions without prompting)\n- --output json flag\n- --extract flag to limit extraction types\n\nNo AI integration yet - just the CLI structure and file discovery.\n\nPart of: Phase 6 AI Ingest Command","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T13:31:31.738186-05:00","created_by":"alicemoore","updated_at":"2025-12-30T13:31:31.738186-05:00","dependencies":[{"issue_id":"ovault-ha1","depends_on_id":"ovault-8c9","type":"blocks","created_at":"2025-12-30T13:31:54.273251-05:00","created_by":"alicemoore"}]}
{"id":"ovault-hvf","title":"Neovim: Formatted table output for ovault list queries","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T18:56:30.450052-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:26.711594-05:00","dependencies":[{"issue_id":"ovault-hvf","depends_on_id":"ovault-tic","type":"blocks","created_at":"2025-12-30T18:56:40.016852-05:00","created_by":"alicemoore"},{"issue_id":"ovault-hvf","depends_on_id":"ovault-01u","type":"blocks","created_at":"2025-12-30T20:15:27.246099-05:00","created_by":"alicemoore"}]}
{"id":"ovault-ijd","title":"Add tests with relative vault paths to catch path handling bugs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T14:17:49.887482-05:00","created_by":"alicemoore","updated_at":"2025-12-31T06:41:19.917437-05:00","closed_at":"2025-12-31T06:41:19.917437-05:00","close_reason":"Added comprehensive tests for relative vault path handling"}
{"id":"ovault-jgq","title":"Phase 0: TypeScript Migration","description":"Migrate ovault from Bash to TypeScript. This is blocking for all other work. See plans/features/typescript-migration.md for full specification.\n\nKey deliverables:\n- Initialize TypeScript project with Commander CLI\n- Port schema loading with Zod validation\n- Port frontmatter parsing with gray-matter\n- Port all existing commands (new, edit, list)\n- Add expression parser for query system\n- Set up Vitest testing with \u003e80% coverage\n- Achieve feature parity with v1 shell implementation","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-25T08:54:37.221002-05:00","updated_at":"2025-12-26T12:01:37.651533-05:00","closed_at":"2025-12-26T12:01:37.651533-05:00","close_reason":"Closed"}
{"id":"ovault-jxd","title":"Consider simpler field names in schema (e.g. 'name' vs 'Task name')","description":"The name field uses 'Task name' with a space, which works but is slightly awkward in JSON payloads. A consistent 'name' field across types would be cleaner for programmatic use.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-30T08:57:06.690793-05:00","created_by":"alicemoore","updated_at":"2025-12-31T13:33:01.351212-05:00","closed_at":"2025-12-31T13:33:01.351212-05:00","close_reason":"Implemented: removed name_field, standardized on 'name' field"}
{"id":"ovault-k41","title":"Initialize TypeScript project with package.json and tsconfig","description":"Set up the TypeScript project structure:\n- Initialize package.json with correct metadata\n- Configure tsconfig.json for Node.js target\n- Set up Commander for CLI framework\n- Add Zod for schema validation\n- Configure esbuild/tsup for bundling\n- Set up npm bin entry point","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:54:56.121966-05:00","updated_at":"2025-12-26T12:05:01.044792-05:00","closed_at":"2025-12-26T12:05:01.044792-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-k41","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:55:01.454976-05:00","created_by":"alicemoore"}]}
{"id":"ovault-kwk","title":"Dashboard: CLI commands (save, list, run, delete)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T18:56:32.556903-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:25.993725-05:00","dependencies":[{"issue_id":"ovault-kwk","depends_on_id":"ovault-sbp","type":"blocks","created_at":"2025-12-30T18:56:40.167617-05:00","created_by":"alicemoore"}]}
{"id":"ovault-lf7","title":"Define Zod schemas for schema.json validation","description":"Create TypeScript type definitions and Zod schemas:\n- Schema type (version, shared_fields, enums, types)\n- Type configuration (output_dir, dir_mode, frontmatter)\n- Field definitions (prompt, enum, required, default)\n- Subtype definitions\n- Export inferred TypeScript types from Zod schemas","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:09.20466-05:00","updated_at":"2025-12-26T12:09:26.207161-05:00","closed_at":"2025-12-26T12:09:26.207161-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-lf7","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:55:15.445952-05:00","created_by":"alicemoore"}]}
{"id":"ovault-llv","title":"Implement basic template support","description":"Add template discovery and usage:\n- Templates in Templates/{type}/{subtype}/{name}.md\n- Parse template frontmatter (type: template, template-for, defaults)\n- Template discovery by type path\n- default.md as default template\n- --template flag to specify template\n- --default flag to use default template\n- --no-template to skip templates\n- Skip prompting for fields with defaults","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:02.275831-05:00","updated_at":"2025-12-29T14:20:27.803689-05:00","closed_at":"2025-12-29T14:20:27.803689-05:00","close_reason":"Implemented basic template support with discovery, parsing, and CLI integration. Templates in Templates/{type}/{subtype}/*.md, --template, --default, --no-template flags, defaults skip prompting, template body substitution.","dependencies":[{"issue_id":"ovault-llv","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:58:08.424167-05:00","created_by":"alicemoore"}]}
{"id":"ovault-mgh","title":"Implement AI extraction via OpenRouter/Anthropic API","description":"Add AI integration for note extraction:\n- Build prompt with schema context + existing entities + note content\n- Call OpenRouter/Anthropic API\n- Parse structured JSON response (with Zod validation)\n- Self-healing for malformed JSON (retry with error context)\n- Support for --model and --provider flags\n\nModels to support:\n- claude-3-5-haiku (default, fast/cheap)\n- claude-sonnet-4 (higher quality)\n\nPart of: Phase 6 AI Ingest Command","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T13:31:34.728208-05:00","created_by":"alicemoore","updated_at":"2025-12-30T13:31:34.728208-05:00","dependencies":[{"issue_id":"ovault-mgh","depends_on_id":"ovault-ha1","type":"blocks","created_at":"2025-12-30T13:31:54.331972-05:00","created_by":"alicemoore"}]}
{"id":"ovault-ne9","title":"PTY tests skip due to node-pty posix_spawnp failure on Node 22","description":"## Problem\nPTY-based tests (tests/ts/**/*.pty.test.ts) are being skipped because node-pty fails to spawn processes.\n\n## Error\n```\nError: posix_spawnp failed.\n    at new UnixTerminal (node_modules/node-pty/lib/unixTerminal.js:92:24)\n```\n\n## Environment\n- Node.js v22.21.1 (via fnm)\n- macOS (darwin-arm64)\n- pnpm v10.26.2\n- node-pty@1.1.0\n\n## Observations\n- Prebuilds exist at node_modules/.pnpm/node-pty@1.1.0/node_modules/node-pty/prebuilds/darwin-arm64/\n- Both pty.node and spawn-helper binaries are present\n- `pnpm rebuild node-pty` doesn't fix the issue\n- The canUsePty() check in pty-helpers.ts correctly detects the failure and skips tests\n\n## Impact\n- All *.pty.test.ts tests are skipped (63 tests)\n- Interactive prompt behavior can't be automatically verified\n- Must rely on unit tests and manual testing\n\n## Possible causes\n1. pnpm symlink structure causing path resolution issues\n2. spawn-helper binary permission or path issues  \n3. Node 22 compatibility issue with node-pty prebuilds\n4. macOS security/sandbox restrictions","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-12-30T06:50:13.914837-05:00","created_by":"alicemoore","updated_at":"2025-12-30T07:27:12.098856-05:00","closed_at":"2025-12-30T07:27:12.098856-05:00","close_reason":"Fixed in PR #14. Root cause was spawn-helper binary lacking execute permission after pnpm extract. Added postinstall chmod script and standardized on pnpm."}
{"id":"ovault-ng6","title":"Neovim: Fuzzy finder window for wikilink insertion (ovault search)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T18:56:29.621735-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:26.662169-05:00","dependencies":[{"issue_id":"ovault-ng6","depends_on_id":"ovault-tic","type":"blocks","created_at":"2025-12-30T18:56:39.96387-05:00","created_by":"alicemoore"},{"issue_id":"ovault-ng6","depends_on_id":"ovault-01u","type":"blocks","created_at":"2025-12-30T20:15:27.195725-05:00","created_by":"alicemoore"}]}
{"id":"ovault-o7i","title":"Set up Vitest testing infrastructure","description":"Configure testing framework:\n- Install and configure Vitest\n- Set up test fixtures directory structure\n- Create test helpers for vault mocking\n- Configure coverage reporting\n- Add test scripts to package.json","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:01.643637-05:00","updated_at":"2025-12-26T12:09:26.206353-05:00","closed_at":"2025-12-26T12:09:26.206353-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-o7i","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:55:09.019191-05:00","created_by":"alicemoore"}]}
{"id":"ovault-oay","title":"Add CLI flow for parent templates spawning child notes","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-30T18:56:27.072362-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:23.307942-05:00"}
{"id":"ovault-p2m","title":"Implement ovault audit --fix modes","description":"Add interactive and auto-fix modes to audit:\n- --fix: interactive mode, prompt for each issue\n- --fix --auto: auto-apply deterministic fixes\n- --strict: unknown fields are errors\n- Auto-fixable: missing required with default\n- Prompt-required: invalid enum, wrong directory, unknown field\n- Track and report fix results\n\n---\n\n## Implementation Status (as of 2025-12-27)\n\n### Completed ✅\n\n**Core Fix Modes:**\n- `--fix` flag (interactive mode) - fully working\n- `--fix --auto` (auto-fix mode) - fully working\n- `--strict` (unknown fields become errors) - fully working\n\n**Auto-Fix Capabilities:**\n- Missing required fields with schema default value\n- Orphan files in managed directories (infer type from directory location)\n\n**Interactive Fix Capabilities:**\n- `missing-required`: prompt for value or offer default\n- `invalid-enum`: prompt to select from valid enum values\n- `unknown-field`: offer to remove field or skip\n- `orphan-file`: prompt to select type (with subtype support)\n\n**Infrastructure:**\n- Fix result tracking (fixed/skipped/failed/remaining counts)\n- Summary output after fix operations\n- Validation: `--auto` requires `--fix`\n- Validation: `--fix` incompatible with `--output json`\n- Comprehensive test coverage in tests/ts/commands/audit.test.ts\n\n### Not Yet Implemented ❌\n\n- Interactive fix for `wrong-directory` (currently shows 'Manual fix required' - would need bulk move with wikilink update)\n- Format violation detection \u0026 auto-fix (e.g., wikilink formatting)\n- Stale reference detection\n- `--allow-field` CLI override option\n\n### Recommendation\n\nThe core requirements from the original issue are complete. Consider closing this issue and tracking remaining items as separate issues if needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:57:25.911995-05:00","updated_at":"2025-12-27T19:35:10.670135-05:00","closed_at":"2025-12-27T19:35:10.670135-05:00","close_reason":"Completed all audit --fix modes implementation:\n- --fix: Interactive repair mode (fully working)\n- --fix --auto: Auto-fix mode (fully working)  \n- --strict: Unknown fields become errors\n- --allow-field: CLI option to allow extra fields\n\nAuto-fixable issues:\n- missing-required (when schema has default)\n- orphan-file (infer type from directory)\n- format-violation (convert to wikilink format)\n\nInteractive fixes:\n- missing-required, invalid-enum, unknown-field, orphan-file, format-violation, stale-reference\n\nAdditional features implemented:\n- Format violation detection (wikilink, quoted-wikilink)\n- Stale reference detection (frontmatter + body)\n- Similar file suggestions for stale references\n- schema audit.allowed_extra_fields config support","dependencies":[{"issue_id":"ovault-p2m","depends_on_id":"ovault-y3k","type":"blocks","created_at":"2025-12-25T08:57:33.77583-05:00","created_by":"alicemoore"}]}
{"id":"ovault-qqu","title":"Extract buildEvalContext to shared lib location","description":"buildEvalContext() is duplicated between list.ts and search.ts. Should be moved to a shared location in lib/ (possibly expression.ts or a new eval-context.ts).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T14:18:02.520921-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:16:32.158439-05:00","closed_at":"2025-12-30T19:16:32.158439-05:00","close_reason":"Implemented in PR #23"}
{"id":"ovault-rlj","title":"Add unit tests for lib functions (\u003e80% coverage)","description":"Comprehensive unit testing:\n- Test schema loading and validation\n- Test frontmatter parsing/writing\n- Test expression parser and evaluation\n- Test vault operations\n- Achieve \u003e80% line coverage","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:15.218557-05:00","updated_at":"2025-12-26T13:05:54.029393-05:00","closed_at":"2025-12-26T13:05:54.029393-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-rlj","depends_on_id":"ovault-wjz","type":"blocks","created_at":"2025-12-25T08:56:20.499167-05:00","created_by":"alicemoore"}]}
{"id":"ovault-rrz","title":"Fix flaky prompt-multiinput.pty.test.ts empty input test","status":"open","priority":3,"issue_type":"bug","created_at":"2025-12-30T20:39:01.448992-05:00","created_by":"alicemoore","updated_at":"2025-12-30T20:39:01.448992-05:00"}
{"id":"ovault-sbp","title":"Dashboard: Define storage format for saved queries","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T18:56:31.669251-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:25.944798-05:00"}
{"id":"ovault-slq","title":"Allow body sections to be set via --json in ovault new","description":"Currently agents must create a note, read it, then edit it to populate body sections (Steps, Additional info, etc.). Would be much more efficient to set body content in a single command, e.g.: ovault new task --json '{\"Task name\": \"...\", \"_body\": {\"Steps\": [\"Step 1\"], \"Additional info\": [\"Note 1\"]}}'","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-30T08:57:04.597024-05:00","created_by":"alicemoore","updated_at":"2025-12-30T16:34:39.581776-05:00","closed_at":"2025-12-30T16:34:39.581776-05:00","close_reason":"Implemented in PR #21"}
{"id":"ovault-t7r","title":"Add --preview flag to open/link commands (fzf + bat)","description":"Add a --preview flag to 'ovault open' and 'ovault link' commands that shows file contents in the fzf picker using bat for syntax highlighting.\n\nWhen --preview is enabled and fzf is available:\n- Show a preview pane with the note's contents\n- Use bat for markdown syntax highlighting if available\n- Fall back to cat if bat is not installed\n\nThis enhances the browsing experience when selecting from multiple candidates or browsing all notes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T16:06:29.394239-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:25.241433-05:00"}
{"id":"ovault-tdy","title":"Port lib/schema.sh to src/lib/schema.ts","description":"Port schema loading and utilities:\n- loadSchema() - load and validate schema from .ovault/schema.json\n- getTypeConfig() - get configuration for a type/subtype\n- getFieldsForType() - get merged fields (shared + type-specific)\n- resolveEnum() - get enum values by name\n- resolveDynamicSource() - resolve dynamic field sources","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:15.643437-05:00","updated_at":"2025-12-26T12:09:59.555646-05:00","closed_at":"2025-12-26T12:09:59.555646-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-tdy","depends_on_id":"ovault-lf7","type":"blocks","created_at":"2025-12-25T08:55:22.416402-05:00","created_by":"alicemoore"}]}
{"id":"ovault-tev","title":"Implement ovault schema add-field command","description":"Add field to existing type:\n- Prompt for field name\n- Prompt for prompt type\n- Prompt for enum (if select)\n- Prompt for required/default\n- Add to type configuration\n- Offer to add to existing files","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:37.445585-05:00","updated_at":"2025-12-30T19:03:24.358273-05:00","dependencies":[{"issue_id":"ovault-tev","depends_on_id":"ovault-w2a","type":"blocks","created_at":"2025-12-25T08:58:45.094305-05:00","created_by":"alicemoore"}]}
{"id":"ovault-tic","title":"Create Neovim plugin for ovault integration","description":"Create Neovim plugin for ovault integration. See plans/features/neovim-plugin.md for implementation plan.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-30T18:56:28.412172-05:00","created_by":"alicemoore","updated_at":"2025-12-30T20:10:07.724156-05:00","dependencies":[{"issue_id":"ovault-tic","depends_on_id":"ovault-01u","type":"blocks","created_at":"2025-12-30T20:15:27.144397-05:00","created_by":"alicemoore"}]}
{"id":"ovault-tsh","title":"Phase 4: Schema Management CLI","description":"Full CLI control over schema - never touch JSON directly. Depends on Phase 1.\n\nIncludes:\n- Type/subtype management (add, edit, remove)\n- Field management\n- Shared field management\n- Enum management\n- Migration system\n\nSee plans/features/schema-management.md","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-25T08:58:24.953069-05:00","updated_at":"2025-12-30T19:03:24.209225-05:00","dependencies":[{"issue_id":"ovault-tsh","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:58:31.564927-05:00","created_by":"alicemoore"}]}
{"id":"ovault-vy7","title":"Add schema migration hooks for re-indexing","description":"When schema changes affect extraction, mark notes for re-processing:\n- New type added (e.g., 'place') → mark notes to re-extract entities\n- New entity type in schema → re-scan for that entity type\n- Track ai-schema-version in frontmatter\n- ovault ingest --pending finds notes with outdated schema version\n\nDepends on: Schema migration system (ovault-3nd)\n\nPart of: Phase 6 AI Ingest Command","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T13:31:46.189313-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:24.457376-05:00","dependencies":[{"issue_id":"ovault-vy7","depends_on_id":"ovault-3nd","type":"blocks","created_at":"2025-12-30T13:31:54.548361-05:00","created_by":"alicemoore"}]}
{"id":"ovault-w2a","title":"Implement ovault schema add-type command","description":"Interactive type creation:\n- Prompt for output directory\n- Prompt for directory mode\n- Prompt for shared fields to include\n- Prompt for type-specific fields\n- Prompt for subtypes (for instance-grouped)\n- Save to schema.json\n- Validate after changes","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:31.754384-05:00","updated_at":"2025-12-30T19:03:24.260517-05:00","dependencies":[{"issue_id":"ovault-w2a","depends_on_id":"ovault-1ot","type":"blocks","created_at":"2025-12-25T08:58:37.254232-05:00","created_by":"alicemoore"}]}
{"id":"ovault-wjz","title":"Port existing tests to Vitest","description":"Migrate existing shell tests to Vitest:\n- Port test_list.sh tests\n- Port test_new.sh tests\n- Update test fixtures for TypeScript\n- Ensure all v1 functionality is tested","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:07.468239-05:00","updated_at":"2025-12-26T13:05:36.41728-05:00","closed_at":"2025-12-26T13:05:36.41728-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-wjz","depends_on_id":"ovault-o7i","type":"blocks","created_at":"2025-12-25T08:56:14.497868-05:00","created_by":"alicemoore"},{"issue_id":"ovault-wjz","depends_on_id":"ovault-5xd","type":"blocks","created_at":"2025-12-25T08:56:14.669963-05:00","created_by":"alicemoore"},{"issue_id":"ovault-wjz","depends_on_id":"ovault-zxx","type":"blocks","created_at":"2025-12-25T08:56:14.84079-05:00","created_by":"alicemoore"},{"issue_id":"ovault-wjz","depends_on_id":"ovault-77w","type":"blocks","created_at":"2025-12-25T08:56:15.013253-05:00","created_by":"alicemoore"}]}
{"id":"ovault-wn5","title":"Refactor audit.ts - split fix logic into separate module","description":"## Problem\n\naudit.ts is ~1200 lines and handles multiple distinct responsibilities:\n- Issue detection (auditFile, runAudit)\n- Auto-fix mode (runAutoFix)\n- Interactive fix mode (runInteractiveFix)\n- Fix application (applyFix, removeField)\n- Output formatting (outputTextResults, outputJsonResults, outputFixResults)\n\nWhen adding the 'add missing field' feature, I had to navigate through all of this to understand:\n1. Where issues are created (auditFile)\n2. Where the AuditIssue interface is defined\n3. Where fixes are applied (applyFix)\n4. Where interactive prompts happen (runInteractiveFix)\n5. Where auto-fixes happen (runAutoFix)\n\n## What went wrong\n\n- Had to read large portions of the file to understand the flow\n- The fix logic (applyFix, removeField, getDefaultValue) is interleaved with the prompting logic\n- Adding a new fix type required changes in 3+ locations within the same file\n\n## Proposed refactor\n\nSplit into:\n- `audit.ts` - Main command, orchestration, detection (auditFile, runAudit)\n- `audit-fix.ts` - Fix operations (applyFix, removeField, getDefaultValue, runAutoFix, runInteractiveFix)\n- `audit-output.ts` - Output formatting (outputTextResults, outputJsonResults, outputFixResults, calculateSummary)\n\nThis would make it clearer where to add new fix types and reduce cognitive load.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:37:59.667022-05:00","created_by":"alicemoore","updated_at":"2025-12-27T19:35:00.653655-05:00","closed_at":"2025-12-27T19:35:00.653655-05:00","close_reason":"Refactored audit.ts from 1347 lines to modular structure:\n- src/lib/audit/types.ts - Type definitions and constants\n- src/lib/audit/detection.ts - File discovery and issue detection  \n- src/lib/audit/fix.ts - Fix operations (auto and interactive)\n- src/lib/audit/output.ts - Output formatting (text and JSON)\n- src/commands/audit.ts - Slim command file (~180 lines)"}
{"id":"ovault-xrg","title":"Non-interactive JSON I/O mode for AI/scripting usage","description":"## Summary\n\nAdd non-interactive JSON input/output mode to ovault commands, enabling AI agents and scripts to use ovault without interactive prompts. This is critical for AI-assisted development workflows.\n\n## Motivation\n\nCurrently all creation and editing commands require interactive prompts (promptSelection, promptInput, etc.). This makes ovault unusable for:\n- AI coding assistants (Claude, Copilot, etc.)\n- Shell scripts and automation\n- CI/CD pipelines\n- Programmatic vault management\n\n## Scope\n\n### 1. `ovault new \u003ctype\u003e --json '\u003cfrontmatter\u003e'`\n\nCreate notes non-interactively by passing frontmatter as JSON:\n\n```bash\novault new objective/task --json '{\"Name\": \"Fix login bug\", \"status\": \"in-progress\", \"priority\": \"high\"}'\n```\n\nBehavior:\n- Accepts JSON object with field values\n- Skips all interactive prompts\n- Uses schema defaults for missing optional fields\n- Errors if required field with no default is missing\n- Name/title comes from JSON (uses name_field from schema)\n- Outputs result as JSON to stdout\n\nSuccess output:\n```json\n{\"success\": true, \"path\": \"Objectives/Tasks/Fix login bug.md\"}\n```\n\n### 2. `ovault edit \u003cfile\u003e --json '\u003cpartial-frontmatter\u003e'`\n\nUpdate notes non-interactively with partial/patch semantics:\n\n```bash\novault edit \"Objectives/Tasks/Fix login bug.md\" --json '{\"status\": \"done\"}'\n```\n\nBehavior:\n- Merges provided fields with existing frontmatter (patch, not replace)\n- Only updates fields present in JSON\n- Validates merged result against schema\n- Outputs result as JSON\n\n### 3. `--output json` flag for all commands\n\nMachine-readable output for any command:\n\n```bash\novault list task --output json\novault schema show objective/task --output json\n```\n\nWhen `--output json` is set:\n- Success results formatted as JSON\n- Errors also formatted as JSON (not just stderr text)\n- No color codes or formatting characters\n\n### 4. Validation error format\n\nWhen JSON mode encounters validation errors, return structured errors with suggestions:\n\n```json\n{\n  \"success\": false,\n  \"errors\": [\n    {\n      \"field\": \"status\",\n      \"value\": \"wip\",\n      \"message\": \"Invalid enum value\",\n      \"expected\": [\"draft\", \"in-progress\", \"done\", \"settled\"],\n      \"suggestion\": \"Did you mean 'in-progress'?\"\n    },\n    {\n      \"field\": \"priority\",\n      \"message\": \"Required field missing\",\n      \"expected\": [\"critical\", \"high\", \"medium\", \"low\"],\n      \"default\": null\n    }\n  ]\n}\n```\n\nError types to handle:\n- Invalid enum value (with fuzzy match suggestion)\n- Required field missing\n- Invalid field type (string vs array vs number)\n- Unknown field (with \"did you mean\" for typos)\n- Invalid date format\n\n### 5. `ovault schema show \u003ctype\u003e --output json`\n\nReturn full type definition as JSON for AI to understand available fields:\n\n```bash\novault schema show objective/task --output json\n```\n\nOutput should include:\n- All fields (inherited + type-specific)\n- Field types and constraints\n- Enum values resolved (not just enum name)\n- Required vs optional\n- Defaults\n- body_sections if defined\n\nThis is critical for AI to construct valid JSON payloads.\n\n## Implementation Notes\n\n### Flag precedence\n- `--json` flag triggers non-interactive mode\n- `--output json` controls output format (can be used independently)\n- Both can be combined: `ovault new task --json '{}' --output json`\n\n### Compatibility with templates (future)\n- When template system is added (Phase 3), `--json` should work with `--template`:\n  ```bash\n  ovault new task --template bug-report --json '{\"Name\": \"Fix crash\", \"severity\": \"high\"}'\n  ```\n- Template provides base values, JSON overrides them\n\n### Exit codes\n- 0: Success\n- 1: Validation error (with JSON error output if --output json)\n- 2: File not found / IO error\n- 3: Schema error\n\n### Instance-grouped types\n- For instance-grouped subtypes, JSON must include parent instance:\n  ```bash\n  ovault new draft/version --json '{\"_instance\": \"Q1 Blog Post\", \"Name\": \"Draft v1\"}'\n  ```\n- Or use a flag: `--instance \"Q1 Blog Post\"`\n\n## Files to modify\n\n- `src/commands/new.ts` - Add --json flag, bypass prompts when set\n- `src/commands/edit.ts` - Add --json flag, merge semantics\n- `src/commands/list.ts` - Add --output json flag\n- `src/commands/schema.ts` - Add --output json flag\n- `src/lib/schema.ts` - Add validation helpers with error details\n- New: `src/lib/validation.ts` - Structured validation with suggestions\n- New: `src/lib/output.ts` - JSON output formatting helpers\n\n## Testing\n\n- Unit tests for validation logic with various error cases\n- Integration tests for each command with --json\n- Test fuzzy matching suggestions\n- Test partial/merge edit semantics\n- Test instance-grouped type handling\n\n## Not in scope (for now)\n\n- Stdin input (flag-only for v1, can add stdin later)\n- Batch operations (multiple notes in one command)\n- Schema validation of body content","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-26T15:36:19.210706-05:00","updated_at":"2025-12-26T15:52:07.488862-05:00","closed_at":"2025-12-26T15:52:07.488862-05:00","close_reason":"Closed"}
{"id":"ovault-xrg.1","title":"Add --json flag to ovault new command","description":"Add non-interactive JSON input mode to the `new` command.\n\n## Implementation\n\n1. Add `--json \u003cstring\u003e` option to newCommand in `src/commands/new.ts`\n2. When `--json` is provided:\n   - Parse JSON input\n   - Skip all interactive prompts (resolveTypePath, buildNoteContent)\n   - Extract name from JSON using schema's name_field\n   - Validate all fields against schema\n   - Use schema defaults for missing optional fields\n   - Error with structured output if required fields missing\n3. Output JSON result: `{\"success\": true, \"path\": \"...\"}`\n\n## Validation requirements\n\n- Check required fields are present (or have defaults)\n- Validate enum fields against allowed values\n- Type check (string vs array vs number)\n- Return structured errors with suggestions\n\n## Instance-grouped handling\n\nFor instance-grouped subtypes, support `--instance \u003cname\u003e` flag:\n```bash\novault new draft/version --instance \"My Project\" --json '{\"Name\": \"Draft v1\"}'\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:37:00.784386-05:00","updated_at":"2025-12-26T15:52:03.077579-05:00","closed_at":"2025-12-26T15:52:03.07758-05:00","dependencies":[{"issue_id":"ovault-xrg.1","depends_on_id":"ovault-xrg","type":"parent-child","created_at":"2025-12-26T15:37:00.785069-05:00","created_by":"alicemoore"}]}
{"id":"ovault-xrg.2","title":"Add --json flag to ovault edit command","description":"Add non-interactive JSON input mode to the `edit` command with merge/patch semantics.\n\n## Implementation\n\n1. Add `--json \u003cstring\u003e` option to editCommand in `src/commands/edit.ts`\n2. When `--json` is provided:\n   - Parse existing note frontmatter\n   - Parse JSON input\n   - Merge JSON into existing frontmatter (patch semantics)\n   - Validate merged result against schema\n   - Write updated note\n3. Output JSON result: `{\"success\": true, \"path\": \"...\", \"updated\": [\"field1\", \"field2\"]}`\n\n## Merge semantics\n\n- Only fields present in JSON are updated\n- Existing fields not in JSON are preserved\n- To clear a field, pass `null`: `{\"deadline\": null}`\n- Arrays are replaced, not merged\n\n## Validation\n\n- Validate merged frontmatter against schema\n- Return structured errors if validation fails\n- Include current value in error output for context","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:37:04.989033-05:00","updated_at":"2025-12-26T15:52:03.149594-05:00","closed_at":"2025-12-26T15:52:03.149595-05:00","dependencies":[{"issue_id":"ovault-xrg.2","depends_on_id":"ovault-xrg","type":"parent-child","created_at":"2025-12-26T15:37:04.98963-05:00","created_by":"alicemoore"}]}
{"id":"ovault-xrg.3","title":"Add --output json flag to list and schema commands","description":"Add `--output json` flag for machine-readable output.\n\n## Commands to update\n\n### ovault list\n- Add `--output json` (or `-o json`) option\n- Output array of objects with all frontmatter fields\n- Include file path in each object\n\n```json\n[\n  {\"_path\": \"Tasks/My Task.md\", \"Name\": \"My Task\", \"status\": \"in-progress\", ...},\n  ...\n]\n```\n\n### ovault schema show\n- Add `--output json` option\n- Output full type definition as JSON\n- Resolve enum references to actual values\n- Include inherited fields (from shared_fields)\n- Include body_sections\n\n```json\n{\n  \"type_path\": \"objective/task\",\n  \"fields\": {\n    \"status\": {\"type\": \"enum\", \"values\": [\"draft\", \"in-progress\", \"done\"], \"required\": true},\n    ...\n  },\n  \"body_sections\": [...],\n  \"output_dir\": \"Objectives/Tasks\"\n}\n```\n\n## Error output\n\nWhen `--output json` is set, errors should also be JSON:\n```json\n{\"success\": false, \"error\": \"Type not found: foo\"}\n```\n\nNo color codes or ANSI escapes in JSON mode.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:37:08.909657-05:00","updated_at":"2025-12-26T15:52:03.221976-05:00","closed_at":"2025-12-26T15:52:03.221977-05:00","dependencies":[{"issue_id":"ovault-xrg.3","depends_on_id":"ovault-xrg","type":"parent-child","created_at":"2025-12-26T15:37:08.910266-05:00","created_by":"alicemoore"}]}
{"id":"ovault-xrg.4","title":"Implement structured validation with suggestions","description":"Create validation utilities that return structured errors with helpful suggestions.\n\n## New file: src/lib/validation.ts\n\n### Core types\n\n```typescript\ninterface ValidationError {\n  field: string;\n  value?: unknown;\n  message: string;\n  expected?: string[] | string;\n  suggestion?: string;\n}\n\ninterface ValidationResult {\n  valid: boolean;\n  errors: ValidationError[];\n}\n```\n\n### Functions to implement\n\n1. `validateFrontmatter(schema, typePath, frontmatter): ValidationResult`\n   - Check all required fields present\n   - Validate enum values\n   - Type check fields\n\n2. `suggestEnumValue(value: string, allowed: string[]): string | undefined`\n   - Fuzzy match for typos (Levenshtein distance)\n   - Return closest match if distance \u003c threshold\n   - e.g., \"wip\" → \"Did you mean 'in-progress'?\"\n\n3. `suggestFieldName(field: string, known: string[]): string | undefined`\n   - For unknown field errors\n   - e.g., \"Status\" → \"Did you mean 'status'?\"\n\n4. `formatValidationErrors(errors: ValidationError[]): string`\n   - Human-readable format for non-JSON mode\n   - Colorized output with suggestions\n\n## Error types to handle\n\n- `required_field_missing` - Required field not provided\n- `invalid_enum_value` - Value not in allowed list\n- `invalid_type` - Wrong type (string vs array vs number)\n- `unknown_field` - Field not in schema (warn, don't error by default)\n- `invalid_date` - Date field with unparseable value\n\n## Testing\n\n- Test fuzzy matching with various typos\n- Test all error types\n- Test edge cases (empty values, null, undefined)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:37:13.31623-05:00","updated_at":"2025-12-26T15:51:58.914814-05:00","closed_at":"2025-12-26T15:51:58.914815-05:00","dependencies":[{"issue_id":"ovault-xrg.4","depends_on_id":"ovault-xrg","type":"parent-child","created_at":"2025-12-26T15:37:13.31687-05:00","created_by":"alicemoore"}]}
{"id":"ovault-xxj","title":"Investigate shell tab completion for CLI commands","description":"Investigate adding shell tab completion scripts for ovault commands.\n\nTab completion in shells (bash/zsh/fish) works via completion scripts that the CLI registers with the shell. This is separate from the interactive picker system.\n\nHow it typically works:\n1. User types `ovault search My\u003cTAB\u003e`\n2. Shell calls a completion function\n3. Function runs something like `ovault search --complete \"My\"`\n4. CLI outputs matching filenames, shell presents them\n\nImplementation would likely involve:\n- `ovault completion bash` - output bash completion script\n- `ovault completion zsh` - output zsh completion script  \n- `ovault completion fish` - output fish completion script\n\nQuestions to investigate:\n- Does Commander.js have built-in completion support?\n- What's the UX for users to install completions?\n- How to complete dynamic values (note names, type paths)?\n\nThis is a nice-to-have ergonomic feature, not blocking any core functionality.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-29T14:47:04.361713-05:00","created_by":"alicemoore","updated_at":"2025-12-30T19:03:25.291341-05:00"}
{"id":"ovault-xy1","title":"JSON mode should accept canonical 'name' key instead of requiring type-specific name_field","description":"## Problem\n\nIn JSON mode (`ovault new \u003ctype\u003e --json`), users must use the schema's `name_field` value as the key (e.g., `\"Idea name\"`), not a simple `\"name\"` key:\n\n```bash\n# Fails - uses 'Name'\novault new idea --json '{\"Name\":\"Test\",\"status\":\"raw\"}'\n# Error: Missing or invalid name field: Idea name\n\n# Works - uses schema's name_field\novault new idea --json '{\"Idea name\":\"Test\",\"status\":\"raw\"}'\n```\n\n## Proposed Solution\n\nAccept both a canonical `\"name\"` key AND the type's actual name_field in JSON mode:\n\n1. Check for `frontmatter[\"name\"]` first\n2. Fall back to `frontmatter[nameField]`\n3. Use whichever is found as the item name\n4. Remove the canonical `\"name\"` from frontmatter before writing (since it's not a real schema field)\n\n## Location\n\n- `src/commands/new.ts:193-199` - where name field is extracted in `createNoteFromJson()`","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-26T16:02:25.693759-05:00","updated_at":"2025-12-30T19:03:25.14132-05:00"}
{"id":"ovault-y3k","title":"Implement ovault audit command (report mode)","description":"Add audit command per plans/features/audit-command.md:\n- Discover all managed files\n- Check for missing required fields\n- Check for invalid enum values\n- Check for wrong directory location\n- Check for unknown fields (warn by default)\n- Check for type mismatches\n- Check for orphan files (no type field)\n- Report issues with clear messages\n- Support filtering by type or path","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:57:18.984074-05:00","updated_at":"2025-12-27T11:06:54.937856-05:00","closed_at":"2025-12-27T11:06:54.937856-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-y3k","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:57:25.681566-05:00","created_by":"alicemoore"}]}
{"id":"ovault-yuq","title":"Phase 5: Recurrence \u0026 Output Formats","description":"Recurring task creation and additional output formats.\n\nIncludes:\n- Recurrence rules and spawning\n- JSON/CSV/Dataview output formats\n\nLower priority - build after core features stabilize.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-25T08:59:04.204836-05:00","updated_at":"2025-12-30T19:03:27.828862-05:00","dependencies":[{"issue_id":"ovault-yuq","depends_on_id":"ovault-9rl","type":"blocks","created_at":"2025-12-25T08:59:11.384553-05:00","created_by":"alicemoore"}]}
{"id":"ovault-ywr","title":"Consider validating simple filter fields in search --text","description":"The list command validates filter field names and enum values against the schema. The search --text command doesn't validate (since it doesn't require a type). This is probably fine, but worth considering for consistency.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-30T14:18:09.24723-05:00","created_by":"alicemoore","updated_at":"2025-12-31T07:55:08.361511-05:00","closed_at":"2025-12-31T07:55:08.361511-05:00","close_reason":"Implemented filter validation in search --text when --type is specified. PR #26 merged."}
{"id":"ovault-zhg","title":"Phase 6: Agentic Workflows","description":"AI-powered automation with vault-based workflow management.\n\nIncludes:\n- Prompt and Agent types\n- Workflow definitions\n- OpenRouter integration\n- Cost tracking\n\nSee plans/features/agentic-workflows.md\n\nLowest priority - experimental feature.","status":"deferred","priority":4,"issue_type":"feature","created_at":"2025-12-25T08:59:11.580785-05:00","updated_at":"2025-12-30T19:03:27.878825-05:00","dependencies":[{"issue_id":"ovault-zhg","depends_on_id":"ovault-tsh","type":"blocks","created_at":"2025-12-25T08:59:16.112466-05:00","created_by":"alicemoore"}]}
{"id":"ovault-zxx","title":"Port ovault edit command","description":"Port the edit existing note command:\n- Parse file argument\n- Load and parse existing frontmatter\n- Determine note type from frontmatter\n- Prompt for fields to edit (with current values)\n- Update frontmatter preserving body\n- Handle --set flag for non-interactive editing","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:48.803525-05:00","updated_at":"2025-12-26T12:10:30.764843-05:00","closed_at":"2025-12-26T12:10:30.764843-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-zxx","depends_on_id":"ovault-48r","type":"blocks","created_at":"2025-12-25T08:55:54.529221-05:00","created_by":"alicemoore"}]}
