{"id":"ovault-0qo","title":"Implement ovault open command","description":"Add command to open notes in Obsidian:\n- Parse file argument\n- Resolve vault name\n- Generate Obsidian URI: obsidian://open?vault=NAME\u0026file=PATH\n- Handle cross-platform differences (macOS, Linux, WSL)\n- Add --open flag support to new and edit commands","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:01.063552-05:00","updated_at":"2025-12-26T12:19:54.485095-05:00","closed_at":"2025-12-26T12:19:54.485095-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-0qo","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:56:07.274245-05:00","created_by":"alicemoore"}]}
{"id":"ovault-0z0","title":"Add --all flag to bulk command for cross-type operations","description":"Add support for `ovault bulk --all` to operate across all managed types.\n\nFeatures:\n- Confirmation prompt: 'This will modify X files across all types. Are you sure? [y/N]'\n- Works with all operations (set, rename, delete, etc.)\n- Useful for vault-wide migrations (e.g., renaming a shared field)\n\nDeferred from initial bulk implementation to reduce scope.\n\nSee plans/features/bulk-operations.md for design.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T21:03:28.782582-05:00","created_by":"alicemoore","updated_at":"2025-12-27T21:03:28.782582-05:00","dependencies":[{"issue_id":"ovault-0z0","depends_on_id":"ovault-bj7","type":"blocks","created_at":"2025-12-27T21:03:28.784251-05:00","created_by":"alicemoore"}]}
{"id":"ovault-1kr","title":"Implement ovault schema enum management","description":"Enum CRUD operations:\n- ovault schema add-enum: create new enum\n- ovault schema edit-enum --add: add value\n- ovault schema edit-enum --rename: rename value (with file updates)\n- ovault schema edit-enum --remove: remove value (prompt for replacement)\n- ovault schema list-enums: show all enums with usage","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:45.286686-05:00","updated_at":"2025-12-25T08:58:45.286686-05:00","dependencies":[{"issue_id":"ovault-1kr","depends_on_id":"ovault-1ot","type":"blocks","created_at":"2025-12-25T08:58:51.602187-05:00","created_by":"alicemoore"}]}
{"id":"ovault-1ot","title":"Implement ovault schema show command","description":"Add schema exploration commands:\n- ovault schema show: tree view of all types/subtypes\n- ovault schema show \u003ctype\u003e: detailed view of specific type\n- ovault schema validate: check schema structure\n- Show shared fields, enums, field configurations\n- Pretty-print output with proper indentation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:56:58.833026-05:00","updated_at":"2025-12-26T12:27:38.725529-05:00","closed_at":"2025-12-26T12:27:38.725529-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-1ot","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:57:04.017597-05:00","created_by":"alicemoore"}]}
{"id":"ovault-1ts","title":"Port lib/list.sh to src/lib/vault.ts","description":"Port vault file operations:\n- listFiles() - enumerate files by type\n- findFile() - locate a specific file\n- discoverManagedFiles() - find all ovault-managed files\n- getVaultPath() - resolve vault location\n- Use fast-glob for pattern matching","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:28.743298-05:00","updated_at":"2025-12-26T12:10:30.764094-05:00","closed_at":"2025-12-26T12:10:30.764094-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-1ts","depends_on_id":"ovault-tdy","type":"blocks","created_at":"2025-12-25T08:55:35.581101-05:00","created_by":"alicemoore"}]}
{"id":"ovault-2i6","title":"Clarify prompt module architecture (prompt.ts vs numberedSelect.ts)","description":"## Problem\n\nThe relationship between prompt.ts and numberedSelect.ts is not immediately obvious:\n- `prompt.ts` exports high-level functions: promptSelection, promptConfirm, promptInput, promptRequired, promptMultiInput\n- `numberedSelect.ts` is a custom implementation that promptSelection wraps\n- `prompts` (npm package) is used by promptConfirm, promptInput, etc.\n\n## What went wrong\n\nWhen fixing Ctrl+C quit behavior, I had to:\n1. First check prompt.ts to understand what promptSelection does\n2. Discover it just calls numberedSelect()\n3. Go to numberedSelect.ts to find the actual implementation\n4. Understand the NumberedSelectResult interface and aborted flag\n5. Come back to prompt.ts to update the return type\n\nSimilarly, promptConfirm uses the `prompts` npm package with different cancellation semantics than numberedSelect. The inconsistent return types (boolean vs string | undefined) made it unclear how to handle cancellation uniformly.\n\n## Current state\n\n- numberedSelect returns `{ value, index, aborted }` but the wrapper loses `aborted`\n- prompt.ts mixed return conventions: some returned undefined, some returned the raw value\n- After fixes: promptSelection returns `string | null`, promptConfirm returns `boolean | null`\n\n## Suggestions\n\n1. **Document the architecture** - Add a header comment to prompt.ts explaining:\n   - numberedSelect.ts = custom TTY-based selection (supports number keys, pagination)\n   - prompts package = used for simple confirm/input (lighter weight)\n   - Why we have both (numberedSelect has features prompts doesn't)\n\n2. **Consider consolidating** - Could numberedSelect also handle confirm prompts? This would give consistent cancellation handling.\n\n3. **Type exports** - Export a common `PromptResult\u003cT\u003e` type that all prompts use, making null = cancelled explicit in the type system.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:38:17.851864-05:00","created_by":"alicemoore","updated_at":"2025-12-29T12:57:35.0641-05:00","closed_at":"2025-12-29T12:57:35.0641-05:00","close_reason":"Closed"}
{"id":"ovault-31k","title":"Implement template constraints","description":"Add validation rules to templates:\n- constraints section in template frontmatter\n- required: true to make optional fields required\n- validate: expression for custom validation\n- error: custom error message\n- Use query expression syntax for validation\n- Validate constraints at note creation time\n- Report constraint violations clearly","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:08.610484-05:00","updated_at":"2025-12-25T08:58:08.610484-05:00","dependencies":[{"issue_id":"ovault-31k","depends_on_id":"ovault-llv","type":"blocks","created_at":"2025-12-25T08:58:13.849348-05:00","created_by":"alicemoore"}]}
{"id":"ovault-3nd","title":"Implement schema migration system","description":"Track and apply schema changes:\n- Schema versioning in schema.json\n- Track pending migrations\n- ovault schema diff: show pending changes\n- ovault schema apply: execute migrations\n- Auto-apply deterministic changes\n- Prompt for non-deterministic changes\n- Log migration history","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:51.798109-05:00","updated_at":"2025-12-25T08:58:51.798109-05:00","dependencies":[{"issue_id":"ovault-3nd","depends_on_id":"ovault-1kr","type":"blocks","created_at":"2025-12-25T08:58:56.754727-05:00","created_by":"alicemoore"},{"issue_id":"ovault-3nd","depends_on_id":"ovault-bj7","type":"blocks","created_at":"2025-12-25T08:58:56.92472-05:00","created_by":"alicemoore"}]}
{"id":"ovault-3un","title":"Implement bulk --move with wikilink auto-update","description":"Add file move operation with link updates:\n- --move path: relocate files to new directory\n- Scan vault for wikilinks to moved files\n- Update all wikilinks to point to new location\n- Handle all wikilink formats: [[File]], [[File|Alias]], [[File#Heading]]\n- Respect shortest-path link preference\n- Report link updates made","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:57:42.899561-05:00","updated_at":"2025-12-28T07:43:47.279748-05:00","closed_at":"2025-12-28T07:43:47.279748-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-3un","depends_on_id":"ovault-bj7","type":"blocks","created_at":"2025-12-25T08:57:47.434301-05:00","created_by":"alicemoore"}]}
{"id":"ovault-41g","title":"Phase 1: Core CLI Polish","description":"Core features that enhance the CLI experience. Depends on TypeScript migration.\n\nIncludes:\n- Shared fields support\n- Directory modes (pooled vs instance-grouped)\n- Open in Obsidian\n- Query system with Bases parity\n- Schema show command\n\nSee plans/roadmap.md Phase 1 section.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-25T08:56:33.618512-05:00","updated_at":"2025-12-26T12:27:38.80028-05:00","closed_at":"2025-12-26T12:27:38.80028-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-41g","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:56:42.542506-05:00","created_by":"alicemoore"}]}
{"id":"ovault-48r","title":"Port lib/body.sh to src/lib/frontmatter.ts","description":"Port frontmatter parsing and writing:\n- parseFrontmatter() - extract frontmatter and body from markdown\n- writeFrontmatter() - serialize frontmatter back to markdown\n- updateFrontmatter() - modify specific fields preserving order\n- Use gray-matter library for parsing\n- Preserve field order and body content","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:22.604936-05:00","updated_at":"2025-12-26T12:09:59.556469-05:00","closed_at":"2025-12-26T12:09:59.556469-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-48r","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:55:28.559082-05:00","created_by":"alicemoore"}]}
{"id":"ovault-4ex","title":"Enable additional strict tsconfig options","description":"Add the following strict compiler options to tsconfig.json:\n\n1. `\"allowUnreachableCode\": false` - Error on unreachable code\n2. `\"exactOptionalPropertyTypes\": true` - Distinguishes between undefined and missing optional properties  \n3. `\"noImplicitOverride\": true` - Requires override keyword for overriding class members\n\nShould be done before too many more changes to avoid accumulating violations.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:51:36.239894-05:00","updated_at":"2025-12-27T10:50:55.237936-05:00","closed_at":"2025-12-27T10:50:55.237936-05:00","close_reason":"Closed"}
{"id":"ovault-5li","title":"Implement parent templates for instance scaffolding","description":"Add instance scaffolding to templates:\n- instances array in template frontmatter\n- Each instance: subtype, filename, template, defaults\n- Create parent note and all specified subtypes\n- Support nested templates for subtypes\n- Report all files created\n- Works with instance-grouped directory mode","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:14.041103-05:00","updated_at":"2025-12-25T08:58:14.041103-05:00","dependencies":[{"issue_id":"ovault-5li","depends_on_id":"ovault-31k","type":"blocks","created_at":"2025-12-25T08:58:18.666835-05:00","created_by":"alicemoore"},{"issue_id":"ovault-5li","depends_on_id":"ovault-cxe","type":"blocks","created_at":"2025-12-25T08:58:18.835963-05:00","created_by":"alicemoore"}]}
{"id":"ovault-5xd","title":"Port ovault new command","description":"Port the new note creation command:\n- Parse type/subtype argument\n- Load schema and get type configuration\n- Prompt for field values (using prompts library)\n- Generate frontmatter with correct field order\n- Create file in correct directory\n- Handle both pooled and instance-grouped modes","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:42.500884-05:00","updated_at":"2025-12-26T12:10:53.375711-05:00","closed_at":"2025-12-26T12:10:53.375711-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-5xd","depends_on_id":"ovault-tdy","type":"blocks","created_at":"2025-12-25T08:55:48.290943-05:00","created_by":"alicemoore"},{"issue_id":"ovault-5xd","depends_on_id":"ovault-48r","type":"blocks","created_at":"2025-12-25T08:55:48.45552-05:00","created_by":"alicemoore"},{"issue_id":"ovault-5xd","depends_on_id":"ovault-1ts","type":"blocks","created_at":"2025-12-25T08:55:48.62125-05:00","created_by":"alicemoore"}]}
{"id":"ovault-77w","title":"Port ovault list command with expression filtering","description":"Port the list command with enhanced filtering:\n- Parse type argument\n- Load files of that type\n- Parse and evaluate --where expressions\n- Format output as table\n- Support --fields to select columns\n- Support --format for json/csv output\n- Use expression parser for filter evaluation","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:54.717441-05:00","updated_at":"2025-12-26T12:49:50.244328-05:00","closed_at":"2025-12-26T12:49:50.244328-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-77w","depends_on_id":"ovault-1ts","type":"blocks","created_at":"2025-12-25T08:56:00.68568-05:00","created_by":"alicemoore"},{"issue_id":"ovault-77w","depends_on_id":"ovault-9pc","type":"blocks","created_at":"2025-12-25T08:56:00.866669-05:00","created_by":"alicemoore"}]}
{"id":"ovault-9pc","title":"Implement expression parser for query system","description":"Create query expression parser using jsep:\n- Parse comparison expressions (==, !=, \u003c, \u003e, etc.)\n- Parse boolean expressions (\u0026\u0026, ||, !)\n- Parse function calls (contains, isEmpty, today, etc.)\n- Parse field access and member expressions\n- Implement expression evaluation with context\n- Add duration literal parsing ('7d', '1w', etc.)\n\nSee plans/features/query-system.md for full operator/function list.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:55:35.762606-05:00","updated_at":"2025-12-26T12:24:09.708482-05:00","closed_at":"2025-12-26T12:24:09.708482-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-9pc","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:55:42.315361-05:00","created_by":"alicemoore"}]}
{"id":"ovault-9rl","title":"Phase 3: Template System","description":"Reusable note templates with defaults, constraints, and scaffolding. Depends on Phase 1.\n\nIncludes:\n- Basic templates with defaults and body structure\n- Template constraints (validation rules)\n- Parent templates for instance scaffolding\n- Template discovery and selection\n\nSee plans/features/template-system.md","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-25T08:57:53.902245-05:00","updated_at":"2025-12-25T08:57:53.902245-05:00","dependencies":[{"issue_id":"ovault-9rl","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:58:02.082921-05:00","created_by":"alicemoore"}]}
{"id":"ovault-9xi","title":"Phase 2: Audit \u0026 Bulk Operations","description":"Vault health and mass operations. Depends on Phase 1.\n\nIncludes:\n- Audit command (report, fix, strict modes)\n- Bulk operations (set, rename, move, delete)\n- Wikilink auto-update on file moves\n\nSee plans/features/audit-command.md and plans/features/bulk-operations.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-25T08:57:11.235661-05:00","updated_at":"2025-12-28T07:43:57.506618-05:00","closed_at":"2025-12-28T07:43:57.506618-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-9xi","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:57:18.792693-05:00","created_by":"alicemoore"}]}
{"id":"ovault-bj7","title":"Implement ovault bulk command","description":"Add bulk operations per plans/features/bulk-operations.md:\n- --set field=value: set field\n- --set field=: clear field\n- --rename old=new: rename field\n- --delete field: delete field\n- --append field=value: add to list\n- --remove field=value: remove from list\n- --where expression: filter targets\n- Dry-run by default, --execute to apply\n- --backup option for safety\n- Git status warnings","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:57:33.966353-05:00","updated_at":"2025-12-28T06:39:46.253619-05:00","closed_at":"2025-12-28T06:39:46.253619-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-bj7","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:57:42.707283-05:00","created_by":"alicemoore"}]}
{"id":"ovault-bjg","title":"Extract shared resolveAndPick helper for open/link commands","description":"The open and link commands have nearly identical logic for:\n1. Resolving a query against the note index\n2. Handling exact match vs ambiguous/fuzzy matches\n3. Invoking the picker when needed\n4. Handling picker errors and cancellation\n\nThis is ~40 lines of duplicated code in each command.\n\nExtract a shared helper like:\n\n```typescript\nasync function resolveAndPick(\n  index: NoteIndex,\n  query: string | undefined,\n  options: {\n    pickerMode: PickerMode;\n    prompt: string;\n    jsonMode: boolean;\n  }\n): Promise\u003cManagedFile | null\u003e\n```\n\nThis would:\n- Handle the no-query case (show all files)\n- Handle exact match (return directly)\n- Handle ambiguous/fuzzy (invoke picker)\n- Handle errors consistently (JSON or text output)\n- Return null on cancellation\n\nBenefits:\n- DRY up open.ts and link.ts\n- Consistent error handling\n- Easier to add new commands that need file selection","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T16:10:42.135898-05:00","created_by":"alicemoore","updated_at":"2025-12-30T08:17:31.19691-05:00","closed_at":"2025-12-30T08:17:31.19691-05:00","close_reason":"Extracted resolveAndPick helper in PR #15. Removes ~76 lines of duplicated code from each command."}
{"id":"ovault-cxe","title":"Implement directory modes (pooled and instance-grouped)","description":"Add directory mode support per plans/features/directory-modes.md:\n- Add dir_mode field to type schema (pooled | instance-grouped)\n- Pooled: all files in output_dir\n- Instance-grouped: files under parent instance folders\n- Parent type = instance field for subtypes\n- Create parent note with same name as folder\n- Update ovault new to prompt for instance when needed\n- Update ovault list to show instances for instance-grouped types\n- Add filename patterns for subtypes ({n}, {date}, etc.)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:52.507728-05:00","updated_at":"2025-12-26T12:26:20.439661-05:00","closed_at":"2025-12-26T12:26:20.439661-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-cxe","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:56:58.64821-05:00","created_by":"alicemoore"}]}
{"id":"ovault-deg","title":"Add integration tests for edit command","description":"Add comprehensive integration tests for the edit command.\n\nThe edit command is interactive and uses the prompts library which requires TTY, making it difficult to test via piped stdin.\n\nOptions to explore:\n- Mock the prompts module in vitest\n- Add non-interactive flags (e.g. --set field=value) to edit command\n- Use a TTY simulation library\n\nTest cases needed:\n- File loading and type detection\n- Frontmatter field editing\n- Body preservation after edit\n- Error handling (file not found, invalid type)\n- --open flag functionality","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-26T13:18:58.901516-05:00","updated_at":"2025-12-26T13:18:58.901516-05:00"}
{"id":"ovault-doh","title":"Add integration tests for CLI commands","description":"End-to-end testing of CLI:\n- Test ovault new with various types\n- Test ovault edit with --set flags\n- Test ovault list with --where filters\n- Test ovault open\n- Test error handling and edge cases","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:20.710105-05:00","updated_at":"2025-12-26T13:18:50.266046-05:00","closed_at":"2025-12-26T13:18:50.266046-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-doh","depends_on_id":"ovault-rlj","type":"blocks","created_at":"2025-12-25T08:56:26.736749-05:00","created_by":"alicemoore"}]}
{"id":"ovault-dxf","title":"Implement shared fields support","description":"Add shared fields feature per plans/features/shared-fields.md:\n- Add shared_fields section to schema structure\n- Implement opt-in model (types list which shared fields to include)\n- Support field_overrides for type-specific defaults\n- Merge shared fields with type fields in getFieldsForType()\n- Shared fields appear first by default\n- Update new/edit commands to handle shared fields\n- Add tests for shared field merging and ordering","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:42.739778-05:00","updated_at":"2025-12-26T12:18:50.373001-05:00","closed_at":"2025-12-26T12:18:50.373001-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-dxf","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:56:52.317156-05:00","created_by":"alicemoore"}]}
{"id":"ovault-h4h","title":"Add TTY-based tests for interactive prompts","description":"## Problem\n\nThe numberedSelect prompt had a bug that tests didn't catch: on first render, it called clearPrompt() which erased lines printed BEFORE the prompt started. This caused the file path and error message to disappear in audit --fix.\n\n## The bug\n\nIn render(), clearPrompt() was called even on first render when there was nothing to clear, so it cleared lines printed before the prompt (file path, error message).\n\nFixed by adding a firstRender flag, but this class of bug can't be caught without TTY tests.\n\n## Why current tests missed it\n\nnumberedSelect tests are unit tests for internal logic (pagination, cursor, keys). They don't render to a terminal. The rendering path requires: real TTY, raw mode, keypress events.\n\n## Proposed solution\n\nAdd PTY-based integration tests using node-pty:\n\n1. Test first render preserves prior output\n2. Test Ctrl+C returns aborted result  \n3. Test navigation doesn't corrupt display\n\n## Alternatives\n\n- Snapshot test render() output strings\n- Mock stdout.write and verify ANSI sequences\n- Manual test script (current approach in prompt-quit.test.ts)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-27T12:38:49.063468-05:00","created_by":"alicemoore","updated_at":"2025-12-27T12:38:49.063468-05:00"}
{"id":"ovault-jgq","title":"Phase 0: TypeScript Migration","description":"Migrate ovault from Bash to TypeScript. This is blocking for all other work. See plans/features/typescript-migration.md for full specification.\n\nKey deliverables:\n- Initialize TypeScript project with Commander CLI\n- Port schema loading with Zod validation\n- Port frontmatter parsing with gray-matter\n- Port all existing commands (new, edit, list)\n- Add expression parser for query system\n- Set up Vitest testing with \u003e80% coverage\n- Achieve feature parity with v1 shell implementation","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-25T08:54:37.221002-05:00","updated_at":"2025-12-26T12:01:37.651533-05:00","closed_at":"2025-12-26T12:01:37.651533-05:00","close_reason":"Closed"}
{"id":"ovault-k41","title":"Initialize TypeScript project with package.json and tsconfig","description":"Set up the TypeScript project structure:\n- Initialize package.json with correct metadata\n- Configure tsconfig.json for Node.js target\n- Set up Commander for CLI framework\n- Add Zod for schema validation\n- Configure esbuild/tsup for bundling\n- Set up npm bin entry point","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:54:56.121966-05:00","updated_at":"2025-12-26T12:05:01.044792-05:00","closed_at":"2025-12-26T12:05:01.044792-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-k41","depends_on_id":"ovault-jgq","type":"blocks","created_at":"2025-12-25T08:55:01.454976-05:00","created_by":"alicemoore"}]}
{"id":"ovault-lf7","title":"Define Zod schemas for schema.json validation","description":"Create TypeScript type definitions and Zod schemas:\n- Schema type (version, shared_fields, enums, types)\n- Type configuration (output_dir, dir_mode, frontmatter)\n- Field definitions (prompt, enum, required, default)\n- Subtype definitions\n- Export inferred TypeScript types from Zod schemas","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:09.20466-05:00","updated_at":"2025-12-26T12:09:26.207161-05:00","closed_at":"2025-12-26T12:09:26.207161-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-lf7","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:55:15.445952-05:00","created_by":"alicemoore"}]}
{"id":"ovault-llv","title":"Implement basic template support","description":"Add template discovery and usage:\n- Templates in Templates/{type}/{subtype}/{name}.md\n- Parse template frontmatter (type: template, template-for, defaults)\n- Template discovery by type path\n- default.md as default template\n- --template flag to specify template\n- --default flag to use default template\n- --no-template to skip templates\n- Skip prompting for fields with defaults","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:02.275831-05:00","updated_at":"2025-12-25T08:58:02.275831-05:00","dependencies":[{"issue_id":"ovault-llv","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:58:08.424167-05:00","created_by":"alicemoore"}]}
{"id":"ovault-o7i","title":"Set up Vitest testing infrastructure","description":"Configure testing framework:\n- Install and configure Vitest\n- Set up test fixtures directory structure\n- Create test helpers for vault mocking\n- Configure coverage reporting\n- Add test scripts to package.json","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:01.643637-05:00","updated_at":"2025-12-26T12:09:26.206353-05:00","closed_at":"2025-12-26T12:09:26.206353-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-o7i","depends_on_id":"ovault-k41","type":"blocks","created_at":"2025-12-25T08:55:09.019191-05:00","created_by":"alicemoore"}]}
{"id":"ovault-p2m","title":"Implement ovault audit --fix modes","description":"Add interactive and auto-fix modes to audit:\n- --fix: interactive mode, prompt for each issue\n- --fix --auto: auto-apply deterministic fixes\n- --strict: unknown fields are errors\n- Auto-fixable: missing required with default\n- Prompt-required: invalid enum, wrong directory, unknown field\n- Track and report fix results\n\n---\n\n## Implementation Status (as of 2025-12-27)\n\n### Completed ✅\n\n**Core Fix Modes:**\n- `--fix` flag (interactive mode) - fully working\n- `--fix --auto` (auto-fix mode) - fully working\n- `--strict` (unknown fields become errors) - fully working\n\n**Auto-Fix Capabilities:**\n- Missing required fields with schema default value\n- Orphan files in managed directories (infer type from directory location)\n\n**Interactive Fix Capabilities:**\n- `missing-required`: prompt for value or offer default\n- `invalid-enum`: prompt to select from valid enum values\n- `unknown-field`: offer to remove field or skip\n- `orphan-file`: prompt to select type (with subtype support)\n\n**Infrastructure:**\n- Fix result tracking (fixed/skipped/failed/remaining counts)\n- Summary output after fix operations\n- Validation: `--auto` requires `--fix`\n- Validation: `--fix` incompatible with `--output json`\n- Comprehensive test coverage in tests/ts/commands/audit.test.ts\n\n### Not Yet Implemented ❌\n\n- Interactive fix for `wrong-directory` (currently shows 'Manual fix required' - would need bulk move with wikilink update)\n- Format violation detection \u0026 auto-fix (e.g., wikilink formatting)\n- Stale reference detection\n- `--allow-field` CLI override option\n\n### Recommendation\n\nThe core requirements from the original issue are complete. Consider closing this issue and tracking remaining items as separate issues if needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-25T08:57:25.911995-05:00","updated_at":"2025-12-27T19:35:10.670135-05:00","closed_at":"2025-12-27T19:35:10.670135-05:00","close_reason":"Completed all audit --fix modes implementation:\n- --fix: Interactive repair mode (fully working)\n- --fix --auto: Auto-fix mode (fully working)  \n- --strict: Unknown fields become errors\n- --allow-field: CLI option to allow extra fields\n\nAuto-fixable issues:\n- missing-required (when schema has default)\n- orphan-file (infer type from directory)\n- format-violation (convert to wikilink format)\n\nInteractive fixes:\n- missing-required, invalid-enum, unknown-field, orphan-file, format-violation, stale-reference\n\nAdditional features implemented:\n- Format violation detection (wikilink, quoted-wikilink)\n- Stale reference detection (frontmatter + body)\n- Similar file suggestions for stale references\n- schema audit.allowed_extra_fields config support","dependencies":[{"issue_id":"ovault-p2m","depends_on_id":"ovault-y3k","type":"blocks","created_at":"2025-12-25T08:57:33.77583-05:00","created_by":"alicemoore"}]}
{"id":"ovault-rlj","title":"Add unit tests for lib functions (\u003e80% coverage)","description":"Comprehensive unit testing:\n- Test schema loading and validation\n- Test frontmatter parsing/writing\n- Test expression parser and evaluation\n- Test vault operations\n- Achieve \u003e80% line coverage","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:15.218557-05:00","updated_at":"2025-12-26T13:05:54.029393-05:00","closed_at":"2025-12-26T13:05:54.029393-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-rlj","depends_on_id":"ovault-wjz","type":"blocks","created_at":"2025-12-25T08:56:20.499167-05:00","created_by":"alicemoore"}]}
{"id":"ovault-tdy","title":"Port lib/schema.sh to src/lib/schema.ts","description":"Port schema loading and utilities:\n- loadSchema() - load and validate schema from .ovault/schema.json\n- getTypeConfig() - get configuration for a type/subtype\n- getFieldsForType() - get merged fields (shared + type-specific)\n- resolveEnum() - get enum values by name\n- resolveDynamicSource() - resolve dynamic field sources","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:15.643437-05:00","updated_at":"2025-12-26T12:09:59.555646-05:00","closed_at":"2025-12-26T12:09:59.555646-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-tdy","depends_on_id":"ovault-lf7","type":"blocks","created_at":"2025-12-25T08:55:22.416402-05:00","created_by":"alicemoore"}]}
{"id":"ovault-tev","title":"Implement ovault schema add-field command","description":"Add field to existing type:\n- Prompt for field name\n- Prompt for prompt type\n- Prompt for enum (if select)\n- Prompt for required/default\n- Add to type configuration\n- Offer to add to existing files","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:37.445585-05:00","updated_at":"2025-12-25T08:58:37.445585-05:00","dependencies":[{"issue_id":"ovault-tev","depends_on_id":"ovault-w2a","type":"blocks","created_at":"2025-12-25T08:58:45.094305-05:00","created_by":"alicemoore"}]}
{"id":"ovault-tsh","title":"Phase 4: Schema Management CLI","description":"Full CLI control over schema - never touch JSON directly. Depends on Phase 1.\n\nIncludes:\n- Type/subtype management (add, edit, remove)\n- Field management\n- Shared field management\n- Enum management\n- Migration system\n\nSee plans/features/schema-management.md","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-25T08:58:24.953069-05:00","updated_at":"2025-12-25T08:58:24.953069-05:00","dependencies":[{"issue_id":"ovault-tsh","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:58:31.564927-05:00","created_by":"alicemoore"}]}
{"id":"ovault-w2a","title":"Implement ovault schema add-type command","description":"Interactive type creation:\n- Prompt for output directory\n- Prompt for directory mode\n- Prompt for shared fields to include\n- Prompt for type-specific fields\n- Prompt for subtypes (for instance-grouped)\n- Save to schema.json\n- Validate after changes","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-25T08:58:31.754384-05:00","updated_at":"2025-12-25T08:58:31.754384-05:00","dependencies":[{"issue_id":"ovault-w2a","depends_on_id":"ovault-1ot","type":"blocks","created_at":"2025-12-25T08:58:37.254232-05:00","created_by":"alicemoore"}]}
{"id":"ovault-wjz","title":"Port existing tests to Vitest","description":"Migrate existing shell tests to Vitest:\n- Port test_list.sh tests\n- Port test_new.sh tests\n- Update test fixtures for TypeScript\n- Ensure all v1 functionality is tested","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:56:07.468239-05:00","updated_at":"2025-12-26T13:05:36.41728-05:00","closed_at":"2025-12-26T13:05:36.41728-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-wjz","depends_on_id":"ovault-o7i","type":"blocks","created_at":"2025-12-25T08:56:14.497868-05:00","created_by":"alicemoore"},{"issue_id":"ovault-wjz","depends_on_id":"ovault-5xd","type":"blocks","created_at":"2025-12-25T08:56:14.669963-05:00","created_by":"alicemoore"},{"issue_id":"ovault-wjz","depends_on_id":"ovault-zxx","type":"blocks","created_at":"2025-12-25T08:56:14.84079-05:00","created_by":"alicemoore"},{"issue_id":"ovault-wjz","depends_on_id":"ovault-77w","type":"blocks","created_at":"2025-12-25T08:56:15.013253-05:00","created_by":"alicemoore"}]}
{"id":"ovault-wn5","title":"Refactor audit.ts - split fix logic into separate module","description":"## Problem\n\naudit.ts is ~1200 lines and handles multiple distinct responsibilities:\n- Issue detection (auditFile, runAudit)\n- Auto-fix mode (runAutoFix)\n- Interactive fix mode (runInteractiveFix)\n- Fix application (applyFix, removeField)\n- Output formatting (outputTextResults, outputJsonResults, outputFixResults)\n\nWhen adding the 'add missing field' feature, I had to navigate through all of this to understand:\n1. Where issues are created (auditFile)\n2. Where the AuditIssue interface is defined\n3. Where fixes are applied (applyFix)\n4. Where interactive prompts happen (runInteractiveFix)\n5. Where auto-fixes happen (runAutoFix)\n\n## What went wrong\n\n- Had to read large portions of the file to understand the flow\n- The fix logic (applyFix, removeField, getDefaultValue) is interleaved with the prompting logic\n- Adding a new fix type required changes in 3+ locations within the same file\n\n## Proposed refactor\n\nSplit into:\n- `audit.ts` - Main command, orchestration, detection (auditFile, runAudit)\n- `audit-fix.ts` - Fix operations (applyFix, removeField, getDefaultValue, runAutoFix, runInteractiveFix)\n- `audit-output.ts` - Output formatting (outputTextResults, outputJsonResults, outputFixResults, calculateSummary)\n\nThis would make it clearer where to add new fix types and reduce cognitive load.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-27T12:37:59.667022-05:00","created_by":"alicemoore","updated_at":"2025-12-27T19:35:00.653655-05:00","closed_at":"2025-12-27T19:35:00.653655-05:00","close_reason":"Refactored audit.ts from 1347 lines to modular structure:\n- src/lib/audit/types.ts - Type definitions and constants\n- src/lib/audit/detection.ts - File discovery and issue detection  \n- src/lib/audit/fix.ts - Fix operations (auto and interactive)\n- src/lib/audit/output.ts - Output formatting (text and JSON)\n- src/commands/audit.ts - Slim command file (~180 lines)"}
{"id":"ovault-xrg","title":"Non-interactive JSON I/O mode for AI/scripting usage","description":"## Summary\n\nAdd non-interactive JSON input/output mode to ovault commands, enabling AI agents and scripts to use ovault without interactive prompts. This is critical for AI-assisted development workflows.\n\n## Motivation\n\nCurrently all creation and editing commands require interactive prompts (promptSelection, promptInput, etc.). This makes ovault unusable for:\n- AI coding assistants (Claude, Copilot, etc.)\n- Shell scripts and automation\n- CI/CD pipelines\n- Programmatic vault management\n\n## Scope\n\n### 1. `ovault new \u003ctype\u003e --json '\u003cfrontmatter\u003e'`\n\nCreate notes non-interactively by passing frontmatter as JSON:\n\n```bash\novault new objective/task --json '{\"Name\": \"Fix login bug\", \"status\": \"in-progress\", \"priority\": \"high\"}'\n```\n\nBehavior:\n- Accepts JSON object with field values\n- Skips all interactive prompts\n- Uses schema defaults for missing optional fields\n- Errors if required field with no default is missing\n- Name/title comes from JSON (uses name_field from schema)\n- Outputs result as JSON to stdout\n\nSuccess output:\n```json\n{\"success\": true, \"path\": \"Objectives/Tasks/Fix login bug.md\"}\n```\n\n### 2. `ovault edit \u003cfile\u003e --json '\u003cpartial-frontmatter\u003e'`\n\nUpdate notes non-interactively with partial/patch semantics:\n\n```bash\novault edit \"Objectives/Tasks/Fix login bug.md\" --json '{\"status\": \"done\"}'\n```\n\nBehavior:\n- Merges provided fields with existing frontmatter (patch, not replace)\n- Only updates fields present in JSON\n- Validates merged result against schema\n- Outputs result as JSON\n\n### 3. `--output json` flag for all commands\n\nMachine-readable output for any command:\n\n```bash\novault list task --output json\novault schema show objective/task --output json\n```\n\nWhen `--output json` is set:\n- Success results formatted as JSON\n- Errors also formatted as JSON (not just stderr text)\n- No color codes or formatting characters\n\n### 4. Validation error format\n\nWhen JSON mode encounters validation errors, return structured errors with suggestions:\n\n```json\n{\n  \"success\": false,\n  \"errors\": [\n    {\n      \"field\": \"status\",\n      \"value\": \"wip\",\n      \"message\": \"Invalid enum value\",\n      \"expected\": [\"draft\", \"in-progress\", \"done\", \"settled\"],\n      \"suggestion\": \"Did you mean 'in-progress'?\"\n    },\n    {\n      \"field\": \"priority\",\n      \"message\": \"Required field missing\",\n      \"expected\": [\"critical\", \"high\", \"medium\", \"low\"],\n      \"default\": null\n    }\n  ]\n}\n```\n\nError types to handle:\n- Invalid enum value (with fuzzy match suggestion)\n- Required field missing\n- Invalid field type (string vs array vs number)\n- Unknown field (with \"did you mean\" for typos)\n- Invalid date format\n\n### 5. `ovault schema show \u003ctype\u003e --output json`\n\nReturn full type definition as JSON for AI to understand available fields:\n\n```bash\novault schema show objective/task --output json\n```\n\nOutput should include:\n- All fields (inherited + type-specific)\n- Field types and constraints\n- Enum values resolved (not just enum name)\n- Required vs optional\n- Defaults\n- body_sections if defined\n\nThis is critical for AI to construct valid JSON payloads.\n\n## Implementation Notes\n\n### Flag precedence\n- `--json` flag triggers non-interactive mode\n- `--output json` controls output format (can be used independently)\n- Both can be combined: `ovault new task --json '{}' --output json`\n\n### Compatibility with templates (future)\n- When template system is added (Phase 3), `--json` should work with `--template`:\n  ```bash\n  ovault new task --template bug-report --json '{\"Name\": \"Fix crash\", \"severity\": \"high\"}'\n  ```\n- Template provides base values, JSON overrides them\n\n### Exit codes\n- 0: Success\n- 1: Validation error (with JSON error output if --output json)\n- 2: File not found / IO error\n- 3: Schema error\n\n### Instance-grouped types\n- For instance-grouped subtypes, JSON must include parent instance:\n  ```bash\n  ovault new draft/version --json '{\"_instance\": \"Q1 Blog Post\", \"Name\": \"Draft v1\"}'\n  ```\n- Or use a flag: `--instance \"Q1 Blog Post\"`\n\n## Files to modify\n\n- `src/commands/new.ts` - Add --json flag, bypass prompts when set\n- `src/commands/edit.ts` - Add --json flag, merge semantics\n- `src/commands/list.ts` - Add --output json flag\n- `src/commands/schema.ts` - Add --output json flag\n- `src/lib/schema.ts` - Add validation helpers with error details\n- New: `src/lib/validation.ts` - Structured validation with suggestions\n- New: `src/lib/output.ts` - JSON output formatting helpers\n\n## Testing\n\n- Unit tests for validation logic with various error cases\n- Integration tests for each command with --json\n- Test fuzzy matching suggestions\n- Test partial/merge edit semantics\n- Test instance-grouped type handling\n\n## Not in scope (for now)\n\n- Stdin input (flag-only for v1, can add stdin later)\n- Batch operations (multiple notes in one command)\n- Schema validation of body content","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-26T15:36:19.210706-05:00","updated_at":"2025-12-26T15:52:07.488862-05:00","closed_at":"2025-12-26T15:52:07.488862-05:00","close_reason":"Closed"}
{"id":"ovault-xrg.1","title":"Add --json flag to ovault new command","description":"Add non-interactive JSON input mode to the `new` command.\n\n## Implementation\n\n1. Add `--json \u003cstring\u003e` option to newCommand in `src/commands/new.ts`\n2. When `--json` is provided:\n   - Parse JSON input\n   - Skip all interactive prompts (resolveTypePath, buildNoteContent)\n   - Extract name from JSON using schema's name_field\n   - Validate all fields against schema\n   - Use schema defaults for missing optional fields\n   - Error with structured output if required fields missing\n3. Output JSON result: `{\"success\": true, \"path\": \"...\"}`\n\n## Validation requirements\n\n- Check required fields are present (or have defaults)\n- Validate enum fields against allowed values\n- Type check (string vs array vs number)\n- Return structured errors with suggestions\n\n## Instance-grouped handling\n\nFor instance-grouped subtypes, support `--instance \u003cname\u003e` flag:\n```bash\novault new draft/version --instance \"My Project\" --json '{\"Name\": \"Draft v1\"}'\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:37:00.784386-05:00","updated_at":"2025-12-26T15:52:03.077579-05:00","closed_at":"2025-12-26T15:52:03.07758-05:00","dependencies":[{"issue_id":"ovault-xrg.1","depends_on_id":"ovault-xrg","type":"parent-child","created_at":"2025-12-26T15:37:00.785069-05:00","created_by":"alicemoore"}]}
{"id":"ovault-xrg.2","title":"Add --json flag to ovault edit command","description":"Add non-interactive JSON input mode to the `edit` command with merge/patch semantics.\n\n## Implementation\n\n1. Add `--json \u003cstring\u003e` option to editCommand in `src/commands/edit.ts`\n2. When `--json` is provided:\n   - Parse existing note frontmatter\n   - Parse JSON input\n   - Merge JSON into existing frontmatter (patch semantics)\n   - Validate merged result against schema\n   - Write updated note\n3. Output JSON result: `{\"success\": true, \"path\": \"...\", \"updated\": [\"field1\", \"field2\"]}`\n\n## Merge semantics\n\n- Only fields present in JSON are updated\n- Existing fields not in JSON are preserved\n- To clear a field, pass `null`: `{\"deadline\": null}`\n- Arrays are replaced, not merged\n\n## Validation\n\n- Validate merged frontmatter against schema\n- Return structured errors if validation fails\n- Include current value in error output for context","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:37:04.989033-05:00","updated_at":"2025-12-26T15:52:03.149594-05:00","closed_at":"2025-12-26T15:52:03.149595-05:00","dependencies":[{"issue_id":"ovault-xrg.2","depends_on_id":"ovault-xrg","type":"parent-child","created_at":"2025-12-26T15:37:04.98963-05:00","created_by":"alicemoore"}]}
{"id":"ovault-xrg.3","title":"Add --output json flag to list and schema commands","description":"Add `--output json` flag for machine-readable output.\n\n## Commands to update\n\n### ovault list\n- Add `--output json` (or `-o json`) option\n- Output array of objects with all frontmatter fields\n- Include file path in each object\n\n```json\n[\n  {\"_path\": \"Tasks/My Task.md\", \"Name\": \"My Task\", \"status\": \"in-progress\", ...},\n  ...\n]\n```\n\n### ovault schema show\n- Add `--output json` option\n- Output full type definition as JSON\n- Resolve enum references to actual values\n- Include inherited fields (from shared_fields)\n- Include body_sections\n\n```json\n{\n  \"type_path\": \"objective/task\",\n  \"fields\": {\n    \"status\": {\"type\": \"enum\", \"values\": [\"draft\", \"in-progress\", \"done\"], \"required\": true},\n    ...\n  },\n  \"body_sections\": [...],\n  \"output_dir\": \"Objectives/Tasks\"\n}\n```\n\n## Error output\n\nWhen `--output json` is set, errors should also be JSON:\n```json\n{\"success\": false, \"error\": \"Type not found: foo\"}\n```\n\nNo color codes or ANSI escapes in JSON mode.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:37:08.909657-05:00","updated_at":"2025-12-26T15:52:03.221976-05:00","closed_at":"2025-12-26T15:52:03.221977-05:00","dependencies":[{"issue_id":"ovault-xrg.3","depends_on_id":"ovault-xrg","type":"parent-child","created_at":"2025-12-26T15:37:08.910266-05:00","created_by":"alicemoore"}]}
{"id":"ovault-xrg.4","title":"Implement structured validation with suggestions","description":"Create validation utilities that return structured errors with helpful suggestions.\n\n## New file: src/lib/validation.ts\n\n### Core types\n\n```typescript\ninterface ValidationError {\n  field: string;\n  value?: unknown;\n  message: string;\n  expected?: string[] | string;\n  suggestion?: string;\n}\n\ninterface ValidationResult {\n  valid: boolean;\n  errors: ValidationError[];\n}\n```\n\n### Functions to implement\n\n1. `validateFrontmatter(schema, typePath, frontmatter): ValidationResult`\n   - Check all required fields present\n   - Validate enum values\n   - Type check fields\n\n2. `suggestEnumValue(value: string, allowed: string[]): string | undefined`\n   - Fuzzy match for typos (Levenshtein distance)\n   - Return closest match if distance \u003c threshold\n   - e.g., \"wip\" → \"Did you mean 'in-progress'?\"\n\n3. `suggestFieldName(field: string, known: string[]): string | undefined`\n   - For unknown field errors\n   - e.g., \"Status\" → \"Did you mean 'status'?\"\n\n4. `formatValidationErrors(errors: ValidationError[]): string`\n   - Human-readable format for non-JSON mode\n   - Colorized output with suggestions\n\n## Error types to handle\n\n- `required_field_missing` - Required field not provided\n- `invalid_enum_value` - Value not in allowed list\n- `invalid_type` - Wrong type (string vs array vs number)\n- `unknown_field` - Field not in schema (warn, don't error by default)\n- `invalid_date` - Date field with unparseable value\n\n## Testing\n\n- Test fuzzy matching with various typos\n- Test all error types\n- Test edge cases (empty values, null, undefined)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-26T15:37:13.31623-05:00","updated_at":"2025-12-26T15:51:58.914814-05:00","closed_at":"2025-12-26T15:51:58.914815-05:00","dependencies":[{"issue_id":"ovault-xrg.4","depends_on_id":"ovault-xrg","type":"parent-child","created_at":"2025-12-26T15:37:13.31687-05:00","created_by":"alicemoore"}]}
{"id":"ovault-xy1","title":"JSON mode should accept canonical 'name' key instead of requiring type-specific name_field","description":"## Problem\n\nIn JSON mode (`ovault new \u003ctype\u003e --json`), users must use the schema's `name_field` value as the key (e.g., `\"Idea name\"`), not a simple `\"name\"` key:\n\n```bash\n# Fails - uses 'Name'\novault new idea --json '{\"Name\":\"Test\",\"status\":\"raw\"}'\n# Error: Missing or invalid name field: Idea name\n\n# Works - uses schema's name_field\novault new idea --json '{\"Idea name\":\"Test\",\"status\":\"raw\"}'\n```\n\n## Proposed Solution\n\nAccept both a canonical `\"name\"` key AND the type's actual name_field in JSON mode:\n\n1. Check for `frontmatter[\"name\"]` first\n2. Fall back to `frontmatter[nameField]`\n3. Use whichever is found as the item name\n4. Remove the canonical `\"name\"` from frontmatter before writing (since it's not a real schema field)\n\n## Location\n\n- `src/commands/new.ts:193-199` - where name field is extracted in `createNoteFromJson()`","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-26T16:02:25.693759-05:00","updated_at":"2025-12-26T16:02:33.906474-05:00"}
{"id":"ovault-y3k","title":"Implement ovault audit command (report mode)","description":"Add audit command per plans/features/audit-command.md:\n- Discover all managed files\n- Check for missing required fields\n- Check for invalid enum values\n- Check for wrong directory location\n- Check for unknown fields (warn by default)\n- Check for type mismatches\n- Check for orphan files (no type field)\n- Report issues with clear messages\n- Support filtering by type or path","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-25T08:57:18.984074-05:00","updated_at":"2025-12-27T11:06:54.937856-05:00","closed_at":"2025-12-27T11:06:54.937856-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-y3k","depends_on_id":"ovault-41g","type":"blocks","created_at":"2025-12-25T08:57:25.681566-05:00","created_by":"alicemoore"}]}
{"id":"ovault-yuq","title":"Phase 5: Recurrence \u0026 Output Formats","description":"Recurring task creation and additional output formats.\n\nIncludes:\n- Recurrence rules and spawning\n- JSON/CSV/Dataview output formats\n\nLower priority - build after core features stabilize.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-25T08:59:04.204836-05:00","updated_at":"2025-12-25T08:59:04.204836-05:00","dependencies":[{"issue_id":"ovault-yuq","depends_on_id":"ovault-9rl","type":"blocks","created_at":"2025-12-25T08:59:11.384553-05:00","created_by":"alicemoore"}]}
{"id":"ovault-zhg","title":"Phase 6: Agentic Workflows","description":"AI-powered automation with vault-based workflow management.\n\nIncludes:\n- Prompt and Agent types\n- Workflow definitions\n- OpenRouter integration\n- Cost tracking\n\nSee plans/features/agentic-workflows.md\n\nLowest priority - experimental feature.","status":"open","priority":4,"issue_type":"feature","created_at":"2025-12-25T08:59:11.580785-05:00","updated_at":"2025-12-25T08:59:11.580785-05:00","dependencies":[{"issue_id":"ovault-zhg","depends_on_id":"ovault-tsh","type":"blocks","created_at":"2025-12-25T08:59:16.112466-05:00","created_by":"alicemoore"}]}
{"id":"ovault-zxx","title":"Port ovault edit command","description":"Port the edit existing note command:\n- Parse file argument\n- Load and parse existing frontmatter\n- Determine note type from frontmatter\n- Prompt for fields to edit (with current values)\n- Update frontmatter preserving body\n- Handle --set flag for non-interactive editing","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-25T08:55:48.803525-05:00","updated_at":"2025-12-26T12:10:30.764843-05:00","closed_at":"2025-12-26T12:10:30.764843-05:00","close_reason":"Closed","dependencies":[{"issue_id":"ovault-zxx","depends_on_id":"ovault-48r","type":"blocks","created_at":"2025-12-25T08:55:54.529221-05:00","created_by":"alicemoore"}]}
